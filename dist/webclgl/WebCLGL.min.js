!function(){function t(i,n,e){function r(o,l){if(!n[o]){if(!i[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.t="MODULE_NOT_FOUND",h}var u=n[o]={i:{}};i[o][0].call(u.i,function(t){var n=i[o][1][t];return r(n||t)},u,u.i,t,i,n,e)}return n[o].i}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}return t}()({1:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.e=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLBuffer.class"),l=t("./WebCLGLKernel.class"),a=t("./WebCLGLVertexFragmentProgram.class"),h=t("./WebCLGLUtils.class"),u=n.e=function(){function t(i){r(this,t),this.a=new h.h,this.u=null,this.f=null,void 0===i||null===i?(this.f=document.c("canvas"),this.f.v=32,this.f.d=32,this.u=h.h.m(this.f,{g:!1})):this.u=i,this.y={_:null,p:null,b:null,w:null};for(var n in this.y)this.y[n]=this.u.L(n),null==this.y[n]&&console.k("extension "+n+" not available");this.A=null,this.y.hasOwnProperty("WEBGL_draw_buffers")&&null!=this.y.w?(this.A=this.u.R(this.y.w.T),console.log("Max draw buffers: "+this.A)):console.log("Max draw buffers: 1");var e=this.u.S(this.u.x,this.u.M);this.F=0!==e.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n",this.O=0,this.C=0;var s=this.a.G(void 0,1,1);this.W=this.u.P(),this.u.B(this.u.I,this.W),this.u.N(this.u.I,new Float32Array(s.U),this.u.D),this.V=this.u.P(),this.u.B(this.u.z,this.V),this.u.N(this.u.z,new Uint16Array(s.X),this.u.D),this.q=[];var o=this.F+"attribute vec3 aVertexPosition;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nvCoord = aVertexPosition.xy*0.5+0.5;\n}\n",l=this.F+"uniform sampler2D sampler_buffer;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_FragColor = texture2D(sampler_buffer, vCoord);}\n";this.j=this.u.H(),this.a.K(this.u,"CLGLREADPIXELS",o,l,this.j),this.$=this.u.Q(this.j,"aVertexPosition"),this.Y=this.u.J(this.j,"sampler_buffer");var a=function(){return void 0!==this.A&&null!==this.A?"#extension GL_EXT_draw_buffers : require\n":""}.bind(this),u=(function(){for(var t="",i=0,n=this.A;i<n;i++)t+="layout(location = "+i+") out vec4 outCol"+i+";\n";return t}.bind(this),function(){for(var t="",i=0,n=this.A;i<n;i++)t+="gl_FragData["+i+"] = texture2D(uArrayCT["+i+"], vCoord);\n";return t}.bind(this));o=this.F+"attribute vec3 aVertexPosition;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nvCoord = aVertexPosition.xy*0.5+0.5;\n}",l=a()+this.F+"uniform sampler2D uArrayCT["+this.A+"];\nvarying vec2 vCoord;\nvoid main(void) {\n"+u()+"}",this.Z=this.u.H(),this.a.K(this.u,"CLGLCOPYTEXTURE",o,l,this.Z),this.tt=this.u.Q(this.Z,"aVertexPosition");for(var f=0,c=this.A;f<c;f++)this.q[f]=this.u.J(this.Z,"uArrayCT["+f+"]");this.it=this.u.nt(),this.u.et(this.u.rt,this.it),this.u.st(this.u.rt,0,this.u.ot,2,2,0,this.u.ot,this.u.lt,new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1])),this.u.at(this.u.rt,this.u.ht,this.u.ut),this.u.at(this.u.rt,this.u.ft,this.u.ut),this.u.at(this.u.rt,this.u.ct,this.u.vt),this.u.at(this.u.rt,this.u.dt,this.u.vt),this.u.et(this.u.rt,null)}return s(t,[{l:"getContext",n:function(){return this.u}},{l:"getMaxDrawBuffers",n:function(){return this.A}},{l:"checkFramebufferStatus",n:function(){var t=this.u.mt(this.u.gt),i={};return i[this.u.yt]=!0,i[this.u._t]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT: The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete",i[this.u.pt]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: There is no attachment",i[this.u.bt]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS: Height and width of the attachment are not the same",i[this.u.Et]="FRAMEBUFFER_UNSUPPORTED: The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer",!0===i[t]&&null!==i[t]||(console.log(i[t]),!1)}},{l:"copy",n:function(t,i){if(void 0!==i&&null!==i)if(void 0!==i[0]&&null!==i[0]){this.u.wt(0,0,i[0].Lt,i[0].kt),this.u.At(this.u.gt,i[0].Rt);for(var n=[],e=0,r=i.length;e<r;e++)void 0!==i[e]&&null!==i[e]?(this.u.Tt(this.u.gt,this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"],this.u.rt,i[e].St,0),n[e]=this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"]):n[e]=this.u.xt;if(this.y.w.Mt(n),!0===this.mt()){this.u.Ft(this.Z);for(var s=0,o=i.length;s<o;s++)this.u.Ot(this.u["TEXTURE"+s]),void 0!==i[s]&&null!==i[s]?this.u.et(this.u.rt,i[s].Ct):this.u.et(this.u.rt,this.it),this.u.Gt(this.q[s],s);this.Wt(i)}}else this.u.At(this.u.gt,null);else this.u.At(this.u.gt,null)}},{l:"copyNow",n:function(t){this.u.Pt(this.tt),this.u.B(this.u.I,this.W),this.u.Bt(this.tt,3,this.u.lt,!1,0,0),this.u.B(this.u.z,this.V),this.u.It(this.u.Nt,6,this.u.Ut,0)}},{l:"createBuffer",n:function(t,i,n){return new o.Dt(this.u,t,i,n)}},{l:"createKernel",n:function(t,i){return new l.Vt(this.u,t,i)}},{l:"createVertexFragmentProgram",n:function(t,i,n,e){return new a.zt(this.u,t,i,n,e)}},{l:"fillBuffer",n:function(t,i,n){this.u.At(this.u.gt,n),this.u.Tt(this.u.gt,this.y.w.Xt,this.u.rt,t,0);var e=[this.y.w.Xt];this.y.w.Mt(e),void 0!==i&&null!==i&&this.u.qt(i[0],i[1],i[2],i[3]),this.u.jt(this.u.Ht)}},{l:"bindAttributeValue",n:function(t,i){void 0!==i&&null!==i?"float4_fromAttr"===t.Kt?(this.u.Pt(t.$t[0]),this.u.B(this.u.I,i.Qt),this.u.Bt(t.$t[0],4,this.u.lt,!1,0,0)):"float_fromAttr"===t.Kt&&(this.u.Pt(t.$t[0]),this.u.B(this.u.I,i.Qt),this.u.Bt(t.$t[0],1,this.u.lt,!1,0,0)):this.u.Yt(t.$t[0])}},{l:"bindSamplerValue",n:function(t,i,n){this.O<16?this.u.Ot(this.u["TEXTURE"+this.O]):this.u.Ot(this.u.Jt),void 0!==n&&null!==n?(this.u.et(this.u.rt,n.St),0===this.C&&(this.C=n.Lt,this.u.Zt(t,this.C))):this.u.et(this.u.rt,this.it),this.u.Gt(i.$t[0],this.O),this.O++}},{l:"bindUniformValue",n:function(t,i){void 0!==i&&null!==i&&("float"===t.Kt?i.constructor===Array?this.u.ti(t.$t[0],i):this.u.Zt(t.$t[0],i):"float4"===t.Kt?this.u.ii(t.$t[0],i[0],i[1],i[2],i[3]):"mat4"===t.Kt&&this.u.ni(t.$t[0],!1,i))}},{l:"bindValue",n:function(t,i,n){switch(i.ei){case"ATTRIBUTE":this.ri(i,n);break;case"SAMPLER":this.si(t.oi,i,n);break;case"UNIFORM":this.li(i,n)}}},{l:"bindFB",n:function(t,i){if(void 0!==t&&null!==t){if(void 0!==t[0]&&null!==t[0]){this.u.wt(0,0,t[0].Lt,t[0].kt),this.u.At(this.u.gt,!0===i?t[0].ai:t[0].Rt);for(var n=[],e=0,r=t.length;e<r;e++)if(void 0!==t[e]&&null!==t[e]){var s=!0===i?t[e].Ct:t[e].St;this.u.Tt(this.u.gt,this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"],this.u.rt,s,0),n[e]=this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"]}else n[e]=this.u.xt;return this.y.w.Mt(n),this.mt()}return this.u.At(this.u.gt,null),!0}return this.u.At(this.u.gt,null),!0}},{l:"enqueueNDRangeKernel",n:function(t,i,n,e){if(this.C=0,this.u.Ft(t.hi),!0===this.ui(i,n)){this.O=0;for(var r in t.fi)this.ci(t,t.fi[r],e[r]);this.u.Pt(t.$),this.u.B(this.u.I,this.W),this.u.Bt(t.$,3,this.u.lt,!1,0,0),this.u.B(this.u.z,this.V),this.u.It(this.u.Nt,6,this.u.Ut,0)}}},{l:"enqueueVertexFragmentProgram",n:function(t,i,n,e,r,s){this.C=0,this.u.Ft(t.vi);var o=void 0!==n&&null!==n?n:4;if(!0===this.ui(e,r)&&void 0!==i&&null!==i){this.O=0;for(var l in t.di)this.ci(t,t.di[l],s[l]);for(var a in t.mi)this.ci(t,t.mi[a],s[a]);"VERTEX_INDEX"===i.gi?(this.u.B(this.u.z,i.Qt),this.u.It(o,i.length,this.u.Ut,0)):this.u.yi(o,0,i.length)}}},{l:"readBuffer",n:function(t){void 0!==this.f&&null!==this.f&&(this.f.v=t.Lt,this.f.d=t.kt),this.u.Ft(this.j),this.u.wt(0,0,t.Lt,t.kt),this.u.At(this.u.gt,t.ai),this.u.Tt(this.u.gt,this.y.w.Xt,this.u.rt,t.Ct,0);var i=[this.y.w.Xt];if(this.y.w.Mt(i),this.u.Ot(this.u._i),this.u.et(this.u.rt,t.St),this.u.Gt(this.Y,0),this.u.Pt(this.$),this.u.B(this.u.I,this.W),this.u.Bt(this.$,3,t.pi,!1,0,0),this.u.B(this.u.z,this.V),this.u.It(this.u.Nt,6,this.u.Ut,0),void 0!==t.bi&&null!==t.bi||(t.bi=new Float32Array(t.Lt*t.kt*4)),this.u.Ei(0,0,t.Lt,t.kt,this.u.ot,this.u.lt,t.bi),"FLOAT"===t.Kt){for(var n=new Float32Array(t.bi.length/4),e=0,r=t.bi.length/4;e<r;e++)n[e]=t.bi[4*e];t.bi=n}return t.bi}}],[{l:"enqueueReadBuffer_WebGLTexture",n:function(t){return t.St}}]),t}();e.e=u,i.i.e=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{wi:2,Li:3,ki:4,Ai:5}],2:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.Dt=function(){function t(i,n,r,s){e(this,t),this.u=i,this.Kt=void 0!==n||null!==n?n:"FLOAT",this.pi=this.u.lt,this.Ri=void 0===r&&null===r||r,this.gi=void 0!==s||null!==s?s:"SAMPLER",this.Lt=null,this.kt=null,this.St=null,this.Ct=null,this.Qt=null,this.Rt=null,this.Ti=null,this.ai=null,this.Si=null,"SAMPLER"===this.gi&&(this.St=this.u.nt(),this.Ct=this.u.nt()),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi&&"VERTEX_INDEX"!==this.gi||(this.Qt=this.u.P())}return r(t,[{l:"createFramebufferAndRenderbuffer",n:function(){var t=function(){var t=this.u.xi();return this.u.Mi(this.u.Fi,t),this.u.Oi(this.u.Fi,this.u.Ci,this.Lt,this.kt),this.u.Mi(this.u.Fi,null),t}.bind(this);null!=this.Rt&&(this.u.Gi(this.Rt),this.u.Gi(this.ai),this.u.Wi(this.Ti),this.u.Wi(this.Si)),this.Rt=this.u.Pi(),this.Ti=t(),this.u.At(this.u.gt,this.Rt),this.u.Bi(this.u.gt,this.u.Ii,this.u.Fi,this.Ti),this.ai=this.u.Pi(),this.Si=t(),this.u.At(this.u.gt,this.ai),this.u.Bi(this.u.gt,this.u.Ii,this.u.Fi,this.Si)}},{l:"writeWebGLTextureBuffer",n:function(t,i){var n=function(t,i){!1===i||void 0===i||null===i?this.u.Ni(this.u.Ui,!1):this.u.Ni(this.u.Ui,!0),this.u.Ni(this.u.Di,!1),this.u.et(this.u.rt,t)}.bind(this),e=function(t){t instanceof HTMLImageElement?"FLOAT4"===this.Kt&&this.u.st(this.u.rt,0,this.u.ot,this.u.ot,this.pi,t):this.u.st(this.u.rt,0,this.u.ot,this.Lt,this.kt,0,this.u.ot,this.pi,t)}.bind(this),r=function(){this.u.at(this.u.rt,this.u.ht,this.u.ut),this.u.at(this.u.rt,this.u.ft,this.u.ut),this.u.at(this.u.rt,this.u.ct,this.u.vt),this.u.at(this.u.rt,this.u.dt,this.u.vt)}.bind(this);t instanceof WebGLTexture?(this.St=t,this.Ct=t):(n(this.St,i),e(t),r(),n(this.Ct,i),e(t),r()),this.u.et(this.u.rt,null)}},{l:"writeBuffer",n:function(t,i,n){var e=function(t){if(!(t instanceof HTMLImageElement))if(this.length.constructor===Array?(this.length=this.length[0]*this.length[1],this.Lt=this.length[0],this.kt=this.length[1]):(this.Lt=Math.ceil(Math.sqrt(this.length)),this.kt=this.Lt),"FLOAT4"===this.Kt){t=t instanceof Float32Array?t:new Float32Array(t);var i=this.Lt*this.kt*4;if(t.length!==i){for(var n=new Float32Array(i),e=0;e<i;e++)n[e]=null!=t[e]?t[e]:0;t=n}}else if("FLOAT"===this.Kt){for(var r=this.Lt*this.kt*4,s=new Float32Array(r),o=0,l=this.Lt*this.kt;o<l;o++){var a=4*o;s[a]=null!=t[o]?t[o]:0,s[a+1]=0,s[a+2]=0,s[a+3]=0}t=s}return t}.bind(this);void 0===n||null===n?t instanceof HTMLImageElement?this.length=t.v*t.d:this.length="FLOAT4"===this.Kt?t.length/4:t.length:this.length=[n[0],n[1]],"SAMPLER"===this.gi&&this.Vi(e(t),i),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi||(this.u.B(this.u.I,this.Qt),this.u.N(this.u.I,t instanceof Float32Array?t:new Float32Array(t),this.u.D)),"VERTEX_INDEX"===this.gi&&(this.u.B(this.u.z,this.Qt),this.u.N(this.u.z,new Uint16Array(t),this.u.D)),this.zi()}},{l:"remove",n:function(){"SAMPLER"===this.gi&&(this.u.Xi(this.St),this.u.Xi(this.Ct)),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi&&"VERTEX_INDEX"!==this.gi||this.u.qi(this.Qt),this.u.Gi(this.Rt),this.u.Gi(this.ai),this.u.Wi(this.Ti),this.u.Wi(this.Si)}}]),t}();t.Dt=s,i.i.Dt=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.Vt=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLUtils.class"),l=n.Vt=function(){function t(i,n,e){r(this,t),this.u=i;var s=this.u.S(this.u.x,this.u.M);this.ji=0!==s.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var o=this.u.L("WEBGL_draw_buffers");this.A=null,null!=o&&(this.A=this.u.R(o.T)),this.name="",this.Hi=!0,this.Ki=null,this.$i=null,this.Qi=null,this.Yi=null,this.Ji=null,this.Zi=null,this.tn=null,this.in=!1,this.fi={},this.nn=null,this.en=null,this.Rt=null,this.ai=null,this.rn=0,this.sn=0,void 0!==n&&null!==n&&this.on(n,e)}return s(t,[{l:"setKernelSource",n:function(t,i){for(var n=function(){var t=this.ji+"attribute vec3 aVertexPosition;\nvarying vec2 global_id;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nglobal_id = aVertexPosition.xy*0.5+0.5;\n}\n",i="#extension GL_EXT_draw_buffers : require\n"+this.ji+o.h.ln(this.fi)+"varying vec2 global_id;\nuniform float uBufferWidth;vec2 get_global_id() {\nreturn global_id;\n}\n"+o.h.an()+o.h.hn()+this.un+"void main(void) {\n"+o.h.fn(8)+this.cn+o.h.vn(8)+"}\n";this.hi=this.u.H();(new o.h).K(this.u,"WEBCLGL",t,i,this.hi);this.$=this.u.Q(this.hi,"aVertexPosition"),this.oi=this.u.J(this.hi,"uBufferWidth");for(var n in this.fi){var e={dn:"SAMPLER",mn:"SAMPLER",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.fi[n].Kt];o.h.pn(this.fi,n),this.fi[n].$t=[this.u.J(this.hi,n.replace(/\[\d.*/,""))],this.fi[n].ei=e}return"VERTEX PROGRAM\n"+t+"\n FRAGMENT PROGRAM\n"+i}.bind(this),e=t.split(")")[0].split("(")[1].split(","),r=0,s=e.length;r<s;r++)if(null!==e[r].match(/\*/gm)){var l=e[r].split("*")[1].trim();o.h.pn(this.fi,l),null!=e[r].match(/float4/gm)?this.fi[l].Kt="float4_fromSampler":null!=e[r].match(/float/gm)&&(this.fi[l].Kt="float_fromSampler")}else if(""!==e[r]){var a=e[r].split(" ")[1].trim();for(var h in this.fi)if(h.replace(/\[\d.*/,"")===a){a=h;break}o.h.pn(this.fi,a),null!=e[r].match(/float4/gm)?this.fi[a].Kt="float4":null!=e[r].match(/float/gm)?this.fi[a].Kt="float":null!=e[r].match(/mat4/gm)&&(this.fi[a].Kt="mat4")}this.un=void 0!==i&&null!==i?i:"",this.un=this.un.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.un=o.h.bn(this.un,this.fi),this.cn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.cn=this.cn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.cn=o.h.bn(this.cn,this.fi);var u=n();!0===this.in&&(console.log("%c KERNEL: "+this.name,"font-size: 20px; color: blue"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}]),t}();e.Vt=l,i.i.Vt=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ki:4}],4:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.h=function(){function t(){e(this,t)}return r(t,[{l:"loadQuad",n:function(t,i,n){var e=void 0===i||null===i?.5:i,r=void 0===n||null===n?.5:n;this.U=[-e,-r,0,e,-r,0,e,r,0,-e,r,0],this.En=[0,0,0,1,0,0,1,1,0,0,1,0],this.X=[0,1,2,0,2,3];var s={};return s.U=this.U,s.En=this.En,s.X=this.X,s}},{l:"createShader",n:function(t,i,n,e,r){var s=!1,o=!1,l=function(i,n){console.log(i);for(var e=[],r=i.split("\n"),s=0,o=r.length;s<o;s++)if(null!=r[s].match(/^ERROR/gim)){var l=r[s].split(":"),a=parseInt(l[2]);e.push([a,r[s]])}var h=t.wn(n).split("\n");h.unshift("");for(var u=0,f=h.length;u<f;u++){for(var c=!1,v="",d=0,m=e.length;d<m;d++)if(u===e[d][0]){c=!0,v=e[d][1];break}!1===c?console.log("%c"+u+" %c"+h[u],"color:black","color:blue"):console.log("%c►►%c"+u+" %c"+h[u]+"\n%c"+v,"color:red","color:black","color:blue","color:red")}}.bind(this),a=t.K(t.Ln);if(t.kn(a,n),t.An(a),t.Rn(a,t.Tn))t.Sn(r,a),s=!0;else{var h=t.xn(a);console.log("%c"+i+" ERROR (vertex program)","color:red"),void 0!==h&&null!==h&&l(h,a)}var u=t.K(t.x);if(t.kn(u,e),t.An(u),t.Rn(u,t.Tn))t.Sn(r,u),o=!0;else{var f=t.xn(u);console.log("%c"+i+" ERROR (fragment program)","color:red"),void 0!==f&&null!==f&&l(f,u)}if(!0===s&&!0===o){if(t.Mn(r),t.Fn(r,t.On))return!0;console.log("Error shader program "+i+":\n ");var c=t.Cn(r);return void 0!==c&&null!==c&&console.log(c),!1}return!1}},{l:"pack",n:function(t){var i=[1/255,1/255,1/255,0],n=t,e=this.Gn(255*n),r=this.Gn(255*e),s=[n,e,r,this.Gn(255*r)],o=[s[1]*i[0],s[2]*i[1],s[3]*i[2],s[3]*i[3]];return[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}},{l:"unpack",n:function(t){var i=[1,1/255,1/65025,1/16581375];return this.Wn(t,i)}}],[{l:"getWebGLContextFromCanvas",n:function(t,i){var n=null;if(null==n)try{n=void 0===i||null===i?t.Pn("webgl"):t.Pn("webgl",i),console.log(null==n?"no webgl":"using webgl")}catch(t){n=null}if(null==n)try{n=void 0===i||null===i?t.Pn("experimental-webgl"):t.Pn("experimental-webgl",i),console.log(null==n?"no experimental-webgl":"using experimental-webgl")}catch(t){n=null}return null==n&&(n=!1),n}},{l:"getUint8ArrayFromHTMLImageElement",n:function(t){var i=document.c("canvas");i.v=t.v,i.d=t.d;var n=i.Pn("2d");return n.Bn(t,0,0),n.Nn(0,0,t.v,t.d).In}},{l:"dot4",n:function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}},{l:"fract",n:function(t){return t>0?t-Math.floor(t):t-Math.ceil(t)}},{l:"packGLSLFunctionString",n:function(){return"vec4 pack (float depth) {\nconst vec4 bias = vec4(1.0 / 255.0,\n1.0 / 255.0,\n1.0 / 255.0,\n0.0);\nfloat r = depth;\nfloat g = fract(r * 255.0);\nfloat b = fract(g * 255.0);\nfloat a = fract(b * 255.0);\nvec4 colour = vec4(r, g, b, a);\nreturn colour - (colour.yzww * bias);\n}\n"}},{l:"unpackGLSLFunctionString",n:function(){return"float unpack (vec4 colour) {\nconst vec4 bitShifts = vec4(1.0,\n1.0 / 255.0,\n1.0 / (255.0 * 255.0),\n1.0 / (255.0 * 255.0 * 255.0));\nreturn dot(colour, bitShifts);\n}\n"}},{l:"getOutputBuffers",n:function(t,i){var n=null;if(void 0!==t.nn&&null!==t.nn)if(n=[],null!=t.nn[0])for(var e=0;e<t.nn.length;e++)n[e]=i[t.nn[e]];else n=null;return n}},{l:"parseSource",n:function(t,i){for(var n in i){var e=new RegExp(n+"\\[(?!\\d).*?\\]","gm"),r=t.match(e);if(null!=r)for(var s=0,o=r.length;s<o;s++){var l=new RegExp("```(s|\t)*gl.*"+r[s]+".*```[^```(s|\t)*gl]","gm");if(null==t.match(l)){var a=r[s].split("[")[0],h=r[s].split("[")[1].split("]")[0];t={dn:t.replace(a+"["+h+"]","texture2D("+a+","+h+")"),mn:t.replace(a+"["+h+"]","texture2D("+a+","+h+").x"),Un:t.replace(a+"["+h+"]",a),Dn:t.replace(a+"["+h+"]",a)}[i[n].Kt]}}}return t=t.replace(/```(\s|\t)*gl/gi,"").replace(/```/gi,"").replace(/;/gi,";\n").replace(/}/gi,"}\n").replace(/{/gi,"{\n")}},{l:"lines_vertex_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",Un:"attribute vec4 "+n+";",Dn:"attribute float "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_fragment_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_drawBuffersInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="float out"+n+"_float = -999.99989;\nvec4 out"+n+"_float4;\n";return i}},{l:"lines_drawBuffersWriteInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="layout(location = "+n+") out vec4 outCol"+n+";\n";return i}},{l:"lines_drawBuffersWrite",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="if(out"+n+"_float != -999.99989) gl_FragData["+n+"] = vec4(out"+n+"_float,0.0,0.0,1.0);\n else gl_FragData["+n+"] = out"+n+"_float4;\n";return i}},{l:"checkArgNameInitialization",n:function(t,i){!1===t.hasOwnProperty(i)&&(t[i]={Kt:null,ei:null,$t:null})}},{l:"get_global_id3_GLSLFunctionString",n:function(){return"vec2 get_global_id(float id, float bufferWidth, float geometryLength) {\nfloat texelSize = 1.0/bufferWidth;float num = (id*geometryLength)/bufferWidth;float column = fract(num)+(texelSize/2.0);float row = (floor(num)/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}},{l:"get_global_id2_GLSLFunctionString",n:function(){return"vec2 get_global_id(vec2 id, float bufferWidth) {\nfloat texelSize = 1.0/bufferWidth;float column = (id.x/bufferWidth)+(texelSize/2.0);float row = (id.y/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}}]),t}();t.h=s,i.i.h=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.zt=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLUtils.class"),l=n.zt=function(){function t(i,n,e,s,o){r(this,t),this.u=i;var l=this.u.S(this.u.x,this.u.M);this.ji=0!==l.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var a=this.u.L("WEBGL_draw_buffers");this.A=null,null!=a&&(this.A=this.u.R(a.T)),this.name="",this.in=!1,this.di={},this.mi={},this.Vn=!1,this.zn=!1,this.Xn=null,this.qn=null,this.jn=null,this.Hn=null,this.nn=null,this.en=null,this.Rt=null,this.ai=null,this.Kn=4,void 0!==n&&null!==n&&this.$n(n,e),void 0!==s&&null!==s&&this.Qn(s,o)}return s(t,[{l:"compileVertexFragmentSource",n:function(){var t=this.ji+"uniform float uOffset;\nuniform float uBufferWidth;"+o.h.Yn(this.di)+o.h.Jn()+o.h.an()+o.h.hn()+this.Xn+"void main(void) {\n"+this.qn+"}\n",i="#extension GL_EXT_draw_buffers : require\n"+this.ji+o.h.ln(this.mi)+o.h.an()+o.h.hn()+this.jn+"void main(void) {\n"+o.h.fn(8)+this.Hn+o.h.vn(8)+"}\n";this.vi=this.u.H();(new o.h).K(this.u,"WEBCLGL VERTEX FRAGMENT PROGRAM",t,i,this.vi);this.Zn=this.u.J(this.vi,"uOffset"),this.oi=this.u.J(this.vi,"uBufferWidth");for(var n in this.di){var e={dn:"SAMPLER",mn:"SAMPLER",Un:"ATTRIBUTE",Dn:"ATTRIBUTE",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.di[n].Kt];o.h.pn(this.di,n);var r="ATTRIBUTE"===e?this.u.Q(this.vi,n):this.u.J(this.vi,n.replace(/\[\d.*/,""));this.di[n].$t=[r],this.di[n].ei=e}for(var s in this.mi){var l={dn:"SAMPLER",mn:"SAMPLER",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.mi[s].Kt];o.h.pn(this.mi,s),this.mi[s].$t=[this.u.J(this.vi,s.replace(/\[\d.*/,""))],this.mi[s].ei=l}return"VERTEX PROGRAM\n"+t+"\n FRAGMENT PROGRAM\n"+i}},{l:"setVertexSource",n:function(t,i){for(var n=t.split(")")[0].split("(")[1].split(","),e=0,r=n.length;e<r;e++)if(null!==n[e].match(/\*attr/gm)){var s=n[e].split("*attr")[1].trim();o.h.pn(this.di,s),null!=n[e].match(/float4/gm)?this.di[s].Kt="float4_fromAttr":null!=n[e].match(/float/gm)&&(this.di[s].Kt="float_fromAttr")}else if(null!==n[e].match(/\*/gm)){var l=n[e].split("*")[1].trim();o.h.pn(this.di,l),null!=n[e].match(/float4/gm)?this.di[l].Kt="float4_fromSampler":null!=n[e].match(/float/gm)&&(this.di[l].Kt="float_fromSampler")}else if(""!==n[e]){var a=n[e].split(" ")[1].trim();for(var h in this.di)if(h.replace(/\[\d.*/,"")===a){a=h;break}o.h.pn(this.di,a),null!=n[e].match(/float4/gm)?this.di[a].Kt="float4":null!=n[e].match(/float/gm)?this.di[a].Kt="float":null!=n[e].match(/mat4/gm)&&(this.di[a].Kt="mat4")}if(this.Xn=void 0!==i&&null!==i?i:"",this.Xn=this.Xn.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.Xn=o.h.bn(this.Xn,this.di),this.qn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.qn=this.qn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.qn=o.h.bn(this.qn,this.di),this.Vn=!0,!0===this.zn){var u=this.te();!0===this.in&&(console.log("%c VFP: "+this.name,"font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}},{l:"setFragmentSource",n:function(t,i){for(var n=t.split(")")[0].split("(")[1].split(","),e=0,r=n.length;e<r;e++)if(null!==n[e].match(/\*/gm)){var s=n[e].split("*")[1].trim();o.h.pn(this.mi,s),null!=n[e].match(/float4/gm)?this.mi[s].Kt="float4_fromSampler":null!=n[e].match(/float/gm)&&(this.mi[s].Kt="float_fromSampler")}else if(""!==n[e]){var l=n[e].split(" ")[1].trim();for(var a in this.mi)if(a.replace(/\[\d.*/,"")===l){l=a;break}o.h.pn(this.mi,l),null!=n[e].match(/float4/gm)?this.mi[l].Kt="float4":null!=n[e].match(/float/gm)?this.mi[l].Kt="float":null!=n[e].match(/mat4/gm)&&(this.mi[l].Kt="mat4")}if(this.jn=void 0!==i&&null!==i?i:"",this.jn=this.jn.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.jn=o.h.bn(this.jn,this.mi),this.Hn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.Hn=this.Hn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.Hn=o.h.bn(this.Hn,this.mi),this.zn=!0,!0===this.Vn){var h=this.te();!0===this.in&&(console.log("%c VFP: ","font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+h,"color: darkgray"))}}}]),t}();e.zt=l,i.i.zt=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ki:4}]},{},[1]),function(){function t(i,n,e){function r(o,l){if(!n[o]){if(!i[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.t="MODULE_NOT_FOUND",h}var u=n[o]={i:{}};i[o][0].call(u.i,function(t){var n=i[o][1][t];return r(n||t)},u,u.i,t,i,n,e)}return n[o].i}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}return t}()({1:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.Dt=function(){function t(i,n,r,s){e(this,t),this.u=i,this.Kt=void 0!==n||null!==n?n:"FLOAT",this.pi=this.u.lt,this.Ri=void 0===r&&null===r||r,this.gi=void 0!==s||null!==s?s:"SAMPLER",this.Lt=null,this.kt=null,this.St=null,this.Ct=null,this.Qt=null,this.Rt=null,this.Ti=null,this.ai=null,this.Si=null,"SAMPLER"===this.gi&&(this.St=this.u.nt(),this.Ct=this.u.nt()),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi&&"VERTEX_INDEX"!==this.gi||(this.Qt=this.u.P())}return r(t,[{l:"createFramebufferAndRenderbuffer",n:function(){var t=function(){var t=this.u.xi();return this.u.Mi(this.u.Fi,t),this.u.Oi(this.u.Fi,this.u.Ci,this.Lt,this.kt),this.u.Mi(this.u.Fi,null),t}.bind(this);null!=this.Rt&&(this.u.Gi(this.Rt),this.u.Gi(this.ai),this.u.Wi(this.Ti),this.u.Wi(this.Si)),this.Rt=this.u.Pi(),this.Ti=t(),this.u.At(this.u.gt,this.Rt),this.u.Bi(this.u.gt,this.u.Ii,this.u.Fi,this.Ti),this.ai=this.u.Pi(),this.Si=t(),this.u.At(this.u.gt,this.ai),this.u.Bi(this.u.gt,this.u.Ii,this.u.Fi,this.Si)}},{l:"writeWebGLTextureBuffer",n:function(t,i){var n=function(t,i){!1===i||void 0===i||null===i?this.u.Ni(this.u.Ui,!1):this.u.Ni(this.u.Ui,!0),this.u.Ni(this.u.Di,!1),this.u.et(this.u.rt,t)}.bind(this),e=function(t){t instanceof HTMLImageElement?"FLOAT4"===this.Kt&&this.u.st(this.u.rt,0,this.u.ot,this.u.ot,this.pi,t):this.u.st(this.u.rt,0,this.u.ot,this.Lt,this.kt,0,this.u.ot,this.pi,t)}.bind(this),r=function(){this.u.at(this.u.rt,this.u.ht,this.u.ut),this.u.at(this.u.rt,this.u.ft,this.u.ut),this.u.at(this.u.rt,this.u.ct,this.u.vt),this.u.at(this.u.rt,this.u.dt,this.u.vt)}.bind(this);t instanceof WebGLTexture?(this.St=t,this.Ct=t):(n(this.St,i),e(t),r(),n(this.Ct,i),e(t),r()),this.u.et(this.u.rt,null)}},{l:"writeBuffer",n:function(t,i,n){var e=function(t){if(!(t instanceof HTMLImageElement))if(this.length.constructor===Array?(this.length=this.length[0]*this.length[1],this.Lt=this.length[0],this.kt=this.length[1]):(this.Lt=Math.ceil(Math.sqrt(this.length)),this.kt=this.Lt),"FLOAT4"===this.Kt){t=t instanceof Float32Array?t:new Float32Array(t);var i=this.Lt*this.kt*4;if(t.length!==i){for(var n=new Float32Array(i),e=0;e<i;e++)n[e]=null!=t[e]?t[e]:0;t=n}}else if("FLOAT"===this.Kt){for(var r=this.Lt*this.kt*4,s=new Float32Array(r),o=0,l=this.Lt*this.kt;o<l;o++){var a=4*o;s[a]=null!=t[o]?t[o]:0,s[a+1]=0,s[a+2]=0,s[a+3]=0}t=s}return t}.bind(this);void 0===n||null===n?t instanceof HTMLImageElement?this.length=t.v*t.d:this.length="FLOAT4"===this.Kt?t.length/4:t.length:this.length=[n[0],n[1]],"SAMPLER"===this.gi&&this.Vi(e(t),i),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi||(this.u.B(this.u.I,this.Qt),this.u.N(this.u.I,t instanceof Float32Array?t:new Float32Array(t),this.u.D)),"VERTEX_INDEX"===this.gi&&(this.u.B(this.u.z,this.Qt),this.u.N(this.u.z,new Uint16Array(t),this.u.D)),this.zi()}},{l:"remove",n:function(){"SAMPLER"===this.gi&&(this.u.Xi(this.St),this.u.Xi(this.Ct)),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi&&"VERTEX_INDEX"!==this.gi||this.u.qi(this.Qt),this.u.Gi(this.Rt),this.u.Gi(this.ai),this.u.Wi(this.Ti),this.u.Wi(this.Si)}}]),t}();t.Dt=s,i.i.Dt=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(){function t(i,n,e){function r(o,l){if(!n[o]){if(!i[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.t="MODULE_NOT_FOUND",h}var u=n[o]={i:{}};i[o][0].call(u.i,function(t){var n=i[o][1][t];return r(n||t)},u,u.i,t,i,n,e)}return n[o].i}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}return t}()({1:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.e=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLBuffer.class"),l=t("./WebCLGLKernel.class"),a=t("./WebCLGLVertexFragmentProgram.class"),h=t("./WebCLGLUtils.class"),u=n.e=function(){function t(i){r(this,t),this.a=new h.h,this.u=null,this.f=null,void 0===i||null===i?(this.f=document.c("canvas"),this.f.v=32,this.f.d=32,this.u=h.h.m(this.f,{g:!1})):this.u=i,this.y={_:null,p:null,b:null,w:null};for(var n in this.y)this.y[n]=this.u.L(n),null==this.y[n]&&console.k("extension "+n+" not available");this.A=null,this.y.hasOwnProperty("WEBGL_draw_buffers")&&null!=this.y.w?(this.A=this.u.R(this.y.w.T),console.log("Max draw buffers: "+this.A)):console.log("Max draw buffers: 1");var e=this.u.S(this.u.x,this.u.M);this.F=0!==e.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n",this.O=0,this.C=0;var s=this.a.G(void 0,1,1);this.W=this.u.P(),this.u.B(this.u.I,this.W),this.u.N(this.u.I,new Float32Array(s.U),this.u.D),this.V=this.u.P(),this.u.B(this.u.z,this.V),this.u.N(this.u.z,new Uint16Array(s.X),this.u.D),this.q=[];var o=this.F+"attribute vec3 aVertexPosition;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nvCoord = aVertexPosition.xy*0.5+0.5;\n}\n",l=this.F+"uniform sampler2D sampler_buffer;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_FragColor = texture2D(sampler_buffer, vCoord);}\n";this.j=this.u.H(),this.a.K(this.u,"CLGLREADPIXELS",o,l,this.j),this.$=this.u.Q(this.j,"aVertexPosition"),this.Y=this.u.J(this.j,"sampler_buffer");var a=function(){return void 0!==this.A&&null!==this.A?"#extension GL_EXT_draw_buffers : require\n":""}.bind(this),u=(function(){for(var t="",i=0,n=this.A;i<n;i++)t+="layout(location = "+i+") out vec4 outCol"+i+";\n";return t}.bind(this),function(){for(var t="",i=0,n=this.A;i<n;i++)t+="gl_FragData["+i+"] = texture2D(uArrayCT["+i+"], vCoord);\n";return t}.bind(this));o=this.F+"attribute vec3 aVertexPosition;\nvarying vec2 vCoord;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nvCoord = aVertexPosition.xy*0.5+0.5;\n}",l=a()+this.F+"uniform sampler2D uArrayCT["+this.A+"];\nvarying vec2 vCoord;\nvoid main(void) {\n"+u()+"}",this.Z=this.u.H(),this.a.K(this.u,"CLGLCOPYTEXTURE",o,l,this.Z),this.tt=this.u.Q(this.Z,"aVertexPosition");for(var f=0,c=this.A;f<c;f++)this.q[f]=this.u.J(this.Z,"uArrayCT["+f+"]");this.it=this.u.nt(),this.u.et(this.u.rt,this.it),this.u.st(this.u.rt,0,this.u.ot,2,2,0,this.u.ot,this.u.lt,new Float32Array([1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1])),this.u.at(this.u.rt,this.u.ht,this.u.ut),this.u.at(this.u.rt,this.u.ft,this.u.ut),this.u.at(this.u.rt,this.u.ct,this.u.vt),this.u.at(this.u.rt,this.u.dt,this.u.vt),this.u.et(this.u.rt,null)}return s(t,[{l:"getContext",n:function(){return this.u}},{l:"getMaxDrawBuffers",n:function(){return this.A}},{l:"checkFramebufferStatus",n:function(){var t=this.u.mt(this.u.gt),i={};return i[this.u.yt]=!0,i[this.u._t]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT: The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete",i[this.u.pt]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: There is no attachment",i[this.u.bt]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS: Height and width of the attachment are not the same",i[this.u.Et]="FRAMEBUFFER_UNSUPPORTED: The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer",!0===i[t]&&null!==i[t]||(console.log(i[t]),!1)}},{l:"copy",n:function(t,i){if(void 0!==i&&null!==i)if(void 0!==i[0]&&null!==i[0]){this.u.wt(0,0,i[0].Lt,i[0].kt),this.u.At(this.u.gt,i[0].Rt);for(var n=[],e=0,r=i.length;e<r;e++)void 0!==i[e]&&null!==i[e]?(this.u.Tt(this.u.gt,this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"],this.u.rt,i[e].St,0),n[e]=this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"]):n[e]=this.u.xt;if(this.y.w.Mt(n),!0===this.mt()){this.u.Ft(this.Z);for(var s=0,o=i.length;s<o;s++)this.u.Ot(this.u["TEXTURE"+s]),void 0!==i[s]&&null!==i[s]?this.u.et(this.u.rt,i[s].Ct):this.u.et(this.u.rt,this.it),this.u.Gt(this.q[s],s);this.Wt(i)}}else this.u.At(this.u.gt,null);else this.u.At(this.u.gt,null)}},{l:"copyNow",n:function(t){this.u.Pt(this.tt),this.u.B(this.u.I,this.W),this.u.Bt(this.tt,3,this.u.lt,!1,0,0),this.u.B(this.u.z,this.V),this.u.It(this.u.Nt,6,this.u.Ut,0)}},{l:"createBuffer",n:function(t,i,n){return new o.Dt(this.u,t,i,n)}},{l:"createKernel",n:function(t,i){return new l.Vt(this.u,t,i)}},{l:"createVertexFragmentProgram",n:function(t,i,n,e){return new a.zt(this.u,t,i,n,e)}},{l:"fillBuffer",n:function(t,i,n){this.u.At(this.u.gt,n),this.u.Tt(this.u.gt,this.y.w.Xt,this.u.rt,t,0);var e=[this.y.w.Xt];this.y.w.Mt(e),void 0!==i&&null!==i&&this.u.qt(i[0],i[1],i[2],i[3]),this.u.jt(this.u.Ht)}},{l:"bindAttributeValue",n:function(t,i){void 0!==i&&null!==i?"float4_fromAttr"===t.Kt?(this.u.Pt(t.$t[0]),this.u.B(this.u.I,i.Qt),this.u.Bt(t.$t[0],4,this.u.lt,!1,0,0)):"float_fromAttr"===t.Kt&&(this.u.Pt(t.$t[0]),this.u.B(this.u.I,i.Qt),this.u.Bt(t.$t[0],1,this.u.lt,!1,0,0)):this.u.Yt(t.$t[0])}},{l:"bindSamplerValue",n:function(t,i,n){this.O<16?this.u.Ot(this.u["TEXTURE"+this.O]):this.u.Ot(this.u.Jt),void 0!==n&&null!==n?(this.u.et(this.u.rt,n.St),0===this.C&&(this.C=n.Lt,this.u.Zt(t,this.C))):this.u.et(this.u.rt,this.it),this.u.Gt(i.$t[0],this.O),this.O++}},{l:"bindUniformValue",n:function(t,i){void 0!==i&&null!==i&&("float"===t.Kt?i.constructor===Array?this.u.ti(t.$t[0],i):this.u.Zt(t.$t[0],i):"float4"===t.Kt?this.u.ii(t.$t[0],i[0],i[1],i[2],i[3]):"mat4"===t.Kt&&this.u.ni(t.$t[0],!1,i))}},{l:"bindValue",n:function(t,i,n){switch(i.ei){case"ATTRIBUTE":this.ri(i,n);break;case"SAMPLER":this.si(t.oi,i,n);break;case"UNIFORM":this.li(i,n)}}},{l:"bindFB",n:function(t,i){if(void 0!==t&&null!==t){if(void 0!==t[0]&&null!==t[0]){this.u.wt(0,0,t[0].Lt,t[0].kt),this.u.At(this.u.gt,!0===i?t[0].ai:t[0].Rt);for(var n=[],e=0,r=t.length;e<r;e++)if(void 0!==t[e]&&null!==t[e]){var s=!0===i?t[e].Ct:t[e].St;this.u.Tt(this.u.gt,this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"],this.u.rt,s,0),n[e]=this.y.w["COLOR_ATTACHMENT"+e+"_WEBGL"]}else n[e]=this.u.xt;return this.y.w.Mt(n),this.mt()}return this.u.At(this.u.gt,null),!0}return this.u.At(this.u.gt,null),!0}},{l:"enqueueNDRangeKernel",n:function(t,i,n,e){if(this.C=0,this.u.Ft(t.hi),!0===this.ui(i,n)){this.O=0;for(var r in t.fi)this.ci(t,t.fi[r],e[r]);this.u.Pt(t.$),this.u.B(this.u.I,this.W),this.u.Bt(t.$,3,this.u.lt,!1,0,0),this.u.B(this.u.z,this.V),this.u.It(this.u.Nt,6,this.u.Ut,0)}}},{l:"enqueueVertexFragmentProgram",n:function(t,i,n,e,r,s){this.C=0,this.u.Ft(t.vi);var o=void 0!==n&&null!==n?n:4;if(!0===this.ui(e,r)&&void 0!==i&&null!==i){this.O=0;for(var l in t.di)this.ci(t,t.di[l],s[l]);for(var a in t.mi)this.ci(t,t.mi[a],s[a]);"VERTEX_INDEX"===i.gi?(this.u.B(this.u.z,i.Qt),this.u.It(o,i.length,this.u.Ut,0)):this.u.yi(o,0,i.length)}}},{l:"readBuffer",n:function(t){void 0!==this.f&&null!==this.f&&(this.f.v=t.Lt,this.f.d=t.kt),this.u.Ft(this.j),this.u.wt(0,0,t.Lt,t.kt),this.u.At(this.u.gt,t.ai),this.u.Tt(this.u.gt,this.y.w.Xt,this.u.rt,t.Ct,0);var i=[this.y.w.Xt];if(this.y.w.Mt(i),this.u.Ot(this.u._i),this.u.et(this.u.rt,t.St),this.u.Gt(this.Y,0),this.u.Pt(this.$),this.u.B(this.u.I,this.W),this.u.Bt(this.$,3,t.pi,!1,0,0),this.u.B(this.u.z,this.V),this.u.It(this.u.Nt,6,this.u.Ut,0),void 0!==t.bi&&null!==t.bi||(t.bi=new Float32Array(t.Lt*t.kt*4)),this.u.Ei(0,0,t.Lt,t.kt,this.u.ot,this.u.lt,t.bi),"FLOAT"===t.Kt){for(var n=new Float32Array(t.bi.length/4),e=0,r=t.bi.length/4;e<r;e++)n[e]=t.bi[4*e];t.bi=n}return t.bi}}],[{l:"enqueueReadBuffer_WebGLTexture",n:function(t){return t.St}}]),t}();e.e=u,i.i.e=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{wi:2,Li:4,ki:5,Ai:6}],2:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.Dt=function(){function t(i,n,r,s){e(this,t),this.u=i,this.Kt=void 0!==n||null!==n?n:"FLOAT",this.pi=this.u.lt,this.Ri=void 0===r&&null===r||r,this.gi=void 0!==s||null!==s?s:"SAMPLER",this.Lt=null,this.kt=null,this.St=null,this.Ct=null,this.Qt=null,this.Rt=null,this.Ti=null,this.ai=null,this.Si=null,"SAMPLER"===this.gi&&(this.St=this.u.nt(),this.Ct=this.u.nt()),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi&&"VERTEX_INDEX"!==this.gi||(this.Qt=this.u.P())}return r(t,[{l:"createFramebufferAndRenderbuffer",n:function(){var t=function(){var t=this.u.xi();return this.u.Mi(this.u.Fi,t),this.u.Oi(this.u.Fi,this.u.Ci,this.Lt,this.kt),this.u.Mi(this.u.Fi,null),t}.bind(this);null!=this.Rt&&(this.u.Gi(this.Rt),this.u.Gi(this.ai),this.u.Wi(this.Ti),this.u.Wi(this.Si)),this.Rt=this.u.Pi(),this.Ti=t(),this.u.At(this.u.gt,this.Rt),this.u.Bi(this.u.gt,this.u.Ii,this.u.Fi,this.Ti),this.ai=this.u.Pi(),this.Si=t(),this.u.At(this.u.gt,this.ai),this.u.Bi(this.u.gt,this.u.Ii,this.u.Fi,this.Si)}},{l:"writeWebGLTextureBuffer",n:function(t,i){var n=function(t,i){!1===i||void 0===i||null===i?this.u.Ni(this.u.Ui,!1):this.u.Ni(this.u.Ui,!0),this.u.Ni(this.u.Di,!1),this.u.et(this.u.rt,t)}.bind(this),e=function(t){t instanceof HTMLImageElement?"FLOAT4"===this.Kt&&this.u.st(this.u.rt,0,this.u.ot,this.u.ot,this.pi,t):this.u.st(this.u.rt,0,this.u.ot,this.Lt,this.kt,0,this.u.ot,this.pi,t)}.bind(this),r=function(){this.u.at(this.u.rt,this.u.ht,this.u.ut),this.u.at(this.u.rt,this.u.ft,this.u.ut),this.u.at(this.u.rt,this.u.ct,this.u.vt),this.u.at(this.u.rt,this.u.dt,this.u.vt)}.bind(this);t instanceof WebGLTexture?(this.St=t,this.Ct=t):(n(this.St,i),e(t),r(),n(this.Ct,i),e(t),r()),this.u.et(this.u.rt,null)}},{l:"writeBuffer",n:function(t,i,n){var e=function(t){if(!(t instanceof HTMLImageElement))if(this.length.constructor===Array?(this.length=this.length[0]*this.length[1],this.Lt=this.length[0],this.kt=this.length[1]):(this.Lt=Math.ceil(Math.sqrt(this.length)),this.kt=this.Lt),"FLOAT4"===this.Kt){t=t instanceof Float32Array?t:new Float32Array(t);var i=this.Lt*this.kt*4;if(t.length!==i){for(var n=new Float32Array(i),e=0;e<i;e++)n[e]=null!=t[e]?t[e]:0;t=n}}else if("FLOAT"===this.Kt){for(var r=this.Lt*this.kt*4,s=new Float32Array(r),o=0,l=this.Lt*this.kt;o<l;o++){var a=4*o;s[a]=null!=t[o]?t[o]:0,s[a+1]=0,s[a+2]=0,s[a+3]=0}t=s}return t}.bind(this);void 0===n||null===n?t instanceof HTMLImageElement?this.length=t.v*t.d:this.length="FLOAT4"===this.Kt?t.length/4:t.length:this.length=[n[0],n[1]],"SAMPLER"===this.gi&&this.Vi(e(t),i),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi||(this.u.B(this.u.I,this.Qt),this.u.N(this.u.I,t instanceof Float32Array?t:new Float32Array(t),this.u.D)),"VERTEX_INDEX"===this.gi&&(this.u.B(this.u.z,this.Qt),this.u.N(this.u.z,new Uint16Array(t),this.u.D)),this.zi()}},{l:"remove",n:function(){"SAMPLER"===this.gi&&(this.u.Xi(this.St),this.u.Xi(this.Ct)),"SAMPLER"!==this.gi&&"ATTRIBUTE"!==this.gi&&"VERTEX_INDEX"!==this.gi||this.u.qi(this.Qt),this.u.Gi(this.Rt),this.u.Gi(this.ai),this.u.Wi(this.Ti),this.u.Wi(this.Si)}}]),t}();t.Dt=s,i.i.Dt=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(){var t=new h,i=null;return arguments[0]instanceof WebGLRenderingContext?(i=arguments[0],t.ie(i),t.ne=new l.e(i),t.ee(arguments),t):arguments[0]instanceof HTMLCanvasElement?(i=a.h.m(arguments[0]),t.ie(i),t.ne=new l.e(i),t.ee(arguments),t):(i=a.h.m(document.c("canvas"),{g:!1}),t.ie(i),t.ne=new l.e(i),t.re(arguments))}Object.defineProperty(n,"__esModule",{n:!0}),n.se=void 0;var o=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}();n.oe=s;var l=t("./WebCLGL.class"),a=t("./WebCLGLUtils.class"),h=n.se=function(){function t(i){r(this,t),this.le={},this.ae={},this.he={},this.ue={},this.fe={},this.ne=null,this.u=null}return o(t,[{l:"defineOutputTempModes",n:function(t,i){for(var n=[],e=0;e<t.length;e++)n[e]=null!=t[e]&&function(t,i){var n=!1;for(var e in i)if("indices"!==e){var r=e.split(" ");if(r.length>0&&r[1]===t){n=!0;break}}return n}(t[e],i);return n}},{l:"prepareReturnCode",n:function(t,i){var n=[],e=t.match(new RegExp(/return.*$/gm)),r=(e=e[0].replace("return ","")).match(new RegExp(/\[/gm));if(null!=r&&r.length>=1){e=e.split("[")[1].split("]")[0];for(var s="",o=0,l=0;l<e.length;l++)","===e[l]&&0===o?(n.push(s),s=""):s+=e[l],"("===e[l]&&o++,")"===e[l]&&o--;n.push(s)}else n.push(e.replace(/;$/gm,""));for(var a="",h=0;h<i.length;h++){var u=!1;for(var f in this.he)if("indices"!==f){var c=f.split(" ");if(c[1]===i[h]){var v=c[0].match(new RegExp("float4","gm"));a+=null!=v&&v.length>0?"out"+h+"_float4 = "+n[h]+";\n":"out"+h+"_float = "+n[h]+";\n",u=!0;break}}!1===u&&(a+="out"+h+"_float4 = "+n[h]+";\n")}return a}},{l:"addKernel",n:function(t){var i=t.ce,n=i[0],e=i[1]instanceof Array?i[1]:[i[1]],r=i[2],s=i[3],o=this.ne.ve(),l=[];for(var a in this.he){var h=a.split(" ")[1];if(void 0!==h&&null!==h){var u=(r+s).match(new RegExp(h.replace(/\[\d.*/,""),"gm"));"indices"!==a&&null!=u&&u.length>0&&(o.fi[h]={},l.push(a.replace("*attr ","* ").replace(/\[\d.*/,"")))}}s="void main("+l.toString()+") {vec2 "+n+" = get_global_id();"+s.replace(/return.*$/gm,this.de(s,e))+"}",o.name=t.name,o.in=null!=t.in&&t.in,o.on(s,r),o.nn=e,o.en=this.me(e,this.he),o.Hi=!0,o.Kn=null!=t.Kn?t.Kn:4,o.Ki=null==t.Ki||t.Ki,o.$i=null!=t.$i&&t.$i,o.Ji=null!=t.Ji?t.Ji:"FUNC_ADD",o.Qi=null!=t.Qi?t.Qi:"SRC_ALPHA",o.Yi=null!=t.Yi?t.Yi:"ONE_MINUS_SRC_ALPHA",this.le[Object.keys(this.le).length.toString()]=o}},{l:"addGraphic",n:function(t){var i=t.ce,n=[null],e=void 0,r=void 0,s=void 0,o=void 0;5===i.length?(n=i[0]instanceof Array?i[0]:[i[0]],e=i[1],r=i[2],s=i[3],o=i[4]):(e=i[0],r=i[1],s=i[2],o=i[3]);var l=this.ne.ge(),a=[],h=[];for(var u in this.he){var f=u.split(" ")[1];if(void 0!==f&&null!==f){var c=(e+r).match(new RegExp(f.replace(/\[\d.*/,""),"gm"));"indices"!==u&&null!=c&&c.length>0&&(l.di[f]={},a.push(u.replace(/\[\d.*/,"")))}}for(var v in this.he){var d=v.split(" ")[1];if(void 0!==d&&null!==d){var m=(s+o).match(new RegExp(d.replace(/\[\d.*/,""),"gm"));"indices"!==v&&null!=m&&m.length>0&&(l.mi[d]={},h.push(v.replace(/\[\d.*/,"")))}}r="void main("+a.toString()+") {"+r+"}",o="void main("+h.toString()+") {"+o.replace(/return.*$/gm,this.de(o,n))+"}",l.name=t.name,l.in=null!=t.in&&t.in,l.$n(r,e),l.Qn(o,s),l.nn=n,l.en=this.me(n,this.he),l.Hi=!0,l.Kn=null!=t.Kn?t.Kn:4,l.Ki=null==t.Ki||t.Ki,l.$i=null==t.$i||t.$i,l.Ji=null!=t.Ji?t.Ji:"FUNC_ADD",l.Qi=null!=t.Qi?t.Qi:"SRC_ALPHA",l.Yi=null!=t.Yi?t.Yi:"ONE_MINUS_SRC_ALPHA",this.ae[Object.keys(this.ae).length.toString()]=l}},{l:"checkArg",n:function(t,i,n){var e=[],r=!1,s=!1;for(var o in i)for(var l in i[o].fi){i[o].fi[l];if(l===t){e.push(i[o]);break}}for(var a in n){for(var h in n[a].di){n[a].di[h];if(h===t){r=!0;break}}for(var u in n[a].mi){n[a].mi[u];if(u===t){s=!0;break}}}return{ye:r,_e:s,pe:e}}},{l:"fillArg",n:function(t,i){this.ne.be(this.ue[t].St,i,this.ue[t].Rt),this.ne.be(this.ue[t].Ct,i,this.ue[t].ai)}},{l:"getAllArgs",n:function(){return this.ue}},{l:"addArg",n:function(t){this.he[t]=null}},{l:"getGPUForArg",n:function(t,i){!1===this.fe.hasOwnProperty(t)&&(this.fe[t]=[]),-1===this.fe[t].indexOf(i)&&this.fe[t].push(i),!1===i.fe.hasOwnProperty(t)&&(i.fe[t]=[]),-1===i.fe[t].indexOf(this)&&i.fe[t].push(this);for(var n in i.he){var e=n.split(" ")[1];if(e===t){this.he[n]=i.he[n],this.ue[e]=i.ue[e];break}}}},{l:"setArg",n:function(t,i,n,e){if("indices"===t)this.Ee(i);else for(var r in this.he){var s=r.split(" ")[1];if(void 0!==s&&s.replace(/\[\d.*/,"")===t){s!==t&&(t=s);var o=!1;if(null!=r.match(/\*/gm)){var l=this.we(t,this.le,this.ae),a="SAMPLER";!0===l.ye&&0===l.pe.length&&!1===l._e&&(a="ATTRIBUTE");var h=r.split("*")[0].toUpperCase();void 0!==e&&null!==e&&(h=e),void 0!==i&&null!==i?((!1===this.ue.hasOwnProperty(t)||!0===this.ue.hasOwnProperty(t)&&null==this.ue[t])&&(this.ue[t]=this.ne.P(h,!1,a),this.ue[t].Le=t,o=!0),this.ue[t].ke(i,!1,n)):this.ue[t]=null}else void 0!==i&&null!==i&&(this.ue[t]=i),o=!0;if(!0===o&&!0===this.fe.hasOwnProperty(t))for(var u=0;u<this.fe[t].length;u++)this.fe[t][u].ue[t]=this.ue[t];break}}return i}},{l:"readArg",n:function(t){return this.ne.Ae(this.ue[t])}},{l:"setIndices",n:function(t){this.Re=this.ne.P("FLOAT",!1,"VERTEX_INDEX"),this.Re.ke(t)}},{l:"getCtx",n:function(){return this.ne.Pn()}},{l:"setCtx",n:function(t){this.u=t}},{l:"getWebCLGL",n:function(){return this.ne}},{l:"onPreProcessKernel",n:function(t,i){this.le[t].Zi=i}},{l:"onPostProcessKernel",n:function(t,i){this.le[t].tn=i}},{l:"enableKernel",n:function(t){this.le["0"|t.toString()].Hi=!0}},{l:"disableKernel",n:function(t){this.le["0"|t.toString()].Hi=!1}},{l:"getKernel",n:function(t){for(var i in this.le)if(i===t)return this.le[i];return null}},{l:"getAllKernels",n:function(){return this.le}},{l:"onPreProcessGraphic",n:function(t,i){this.ae[t].Zi=i}},{l:"onPostProcessGraphic",n:function(t,i){this.ae[t].tn=i}},{l:"enableGraphic",n:function(t){this.ae["0"|t.toString()].Hi=!0}},{l:"disableGraphic",n:function(t){this.ae["0"|t.toString()].Hi=!1}},{l:"getVertexFragmentProgram",n:function(t){for(var i in this.ae)if(i===t)return this.ae[i];return null}},{l:"getAllVertexFragmentProgram",n:function(){return this.ae}},{l:"processKernel",n:function(t,i,n){if(!0===t.Hi){if(void 0!==n&&null!==n&&!0===n&&(this.Te=[]),!0===t.Ki?this.u.Se(this.u.xe):this.u.Me(this.u.xe),!0===t.$i?this.u.Se(this.u.Fe):this.u.Me(this.u.Fe),this.u.Oe(this.u[t.Qi],this.u[t.Yi]),this.u.Ji(this.u[t.Ji]),void 0!==t.Zi&&null!==t.Zi&&t.Zi(),void 0===i||null===i||!0===i){for(var e=!1,r=0;r<t.nn.length;r++)if(null!=t.nn[r]&&!0===t.en[r]){e=!0;break}!0===e?(this.ne.Ce(t,a.h.Ge(t,this.ue),!0,this.ue),this.Te.push(t)):this.ne.Ce(t,a.h.Ge(t,this.ue),!1,this.ue)}else this.ne.Ce(t,a.h.Ge(t,this.ue),!1,this.ue);void 0!==t.tn&&null!==t.tn&&t.tn(),void 0!==n&&null!==n&&!0===n&&this.We()}}},{l:"processCopies",n:function(t){for(var i=0;i<this.Te.length;i++)this.ne.Pe(this.Te[i],a.h.Ge(this.Te[i],this.ue))}},{l:"processKernels",n:function(t){this.Te=[];for(var i in this.le)this.Be(this.le[i],t);this.We()}},{l:"processGraphic",n:function(t){var i=[];for(var n in this.ae){var e=this.ae[n];if(!0===e.Hi){var r=void 0!==t&&null!==t||void 0===this.Re||null===this.Re?this.ue[t]:this.Re;if(void 0!==r&&null!==r&&r.length>0){!0===e.Ki?this.u.Se(this.u.xe):this.u.Me(this.u.xe),!0===e.$i?this.u.Se(this.u.Fe):this.u.Me(this.u.Fe),this.u.Oe(this.u[e.Qi],this.u[e.Yi]),this.u.Ji(this.u[e.Ji]),void 0!==e.Zi&&null!==e.Zi&&e.Zi();for(var s=!1,o=0;o<e.nn.length;o++)if(null!=e.nn[o]&&!0===e.en[o]){s=!0;break}!0===s?(this.ne.Ie(e,r,e.Kn,a.h.Ge(e,this.ue),!0,this.ue),i.push(e)):this.ne.Ie(e,r,e.Kn,a.h.Ge(e,this.ue),!1,this.ue),void 0!==e.tn&&null!==e.tn&&e.tn()}}}for(var l=0;l<i.length;l++)this.ne.Pe(i[l],a.h.Ge(i[l],this.ue))}},{l:"ini",n:function(){var t=arguments[0],i=void 0,n=void 0,e=void 0;t.length>3?(this.he=t[0],i=t[1],n=t[2],e=t[3]):(this.he=t[0],i=t[1],n="FLOAT",e=t[2]);var r=0;for(var s in this.he){var o=this.he[s];this.Ne(s.split(" ")[1],o),0===r&&(o instanceof Array||o instanceof Float32Array||o instanceof Uint8Array||o instanceof HTMLImageElement)&&(r=o.length)}return"FLOAT"===n?this.Ue("float* result"):this.Ue("float4* result"),this.Ne("result",new Float32Array(r),null,n),this.De({Kt:"KERNEL",name:"SIMPLE_KERNEL",in:!1,ce:[i,["result"],"",e]}),this.Ve(),this.ne.Ae(this.ue.ze)}},{l:"iniG",n:function(){this.ne.Pn().Xe(this.ne.Pn().qe),this.ne.Pn().je(1);var t=arguments[0];this.he=t[1];for(var i=2;i<t.length;i++)"KERNEL"===t[i].Kt?this.De(t[i]):"GRAPHIC"===t[i].Kt&&this.He(t[i]);for(var n in this.he){var e=this.he[n];"indices"===n?null!==e&&this.Ee(e):this.Ne(n.split(" ")[1],e)}}}]),t}();e.se=h,i.i.se=h,e.oe=s,i.i.oe=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{Ke:1,ki:5}],4:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.Vt=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLUtils.class"),l=n.Vt=function(){function t(i,n,e){r(this,t),this.u=i;var s=this.u.S(this.u.x,this.u.M);this.ji=0!==s.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var o=this.u.L("WEBGL_draw_buffers");this.A=null,null!=o&&(this.A=this.u.R(o.T)),this.name="",this.Hi=!0,this.Ki=null,this.$i=null,this.Qi=null,this.Yi=null,this.Ji=null,this.Zi=null,this.tn=null,this.in=!1,this.fi={},this.nn=null,this.en=null,this.Rt=null,this.ai=null,this.rn=0,this.sn=0,void 0!==n&&null!==n&&this.on(n,e)}return s(t,[{l:"setKernelSource",n:function(t,i){for(var n=function(){var t=this.ji+"attribute vec3 aVertexPosition;\nvarying vec2 global_id;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nglobal_id = aVertexPosition.xy*0.5+0.5;\n}\n",i="#extension GL_EXT_draw_buffers : require\n"+this.ji+o.h.ln(this.fi)+"varying vec2 global_id;\nuniform float uBufferWidth;vec2 get_global_id() {\nreturn global_id;\n}\n"+o.h.an()+o.h.hn()+this.un+"void main(void) {\n"+o.h.fn(8)+this.cn+o.h.vn(8)+"}\n";this.hi=this.u.H();(new o.h).K(this.u,"WEBCLGL",t,i,this.hi);this.$=this.u.Q(this.hi,"aVertexPosition"),this.oi=this.u.J(this.hi,"uBufferWidth");for(var n in this.fi){var e={dn:"SAMPLER",mn:"SAMPLER",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.fi[n].Kt];o.h.pn(this.fi,n),this.fi[n].$t=[this.u.J(this.hi,n.replace(/\[\d.*/,""))],this.fi[n].ei=e}return"VERTEX PROGRAM\n"+t+"\n FRAGMENT PROGRAM\n"+i}.bind(this),e=t.split(")")[0].split("(")[1].split(","),r=0,s=e.length;r<s;r++)if(null!==e[r].match(/\*/gm)){var l=e[r].split("*")[1].trim();o.h.pn(this.fi,l),null!=e[r].match(/float4/gm)?this.fi[l].Kt="float4_fromSampler":null!=e[r].match(/float/gm)&&(this.fi[l].Kt="float_fromSampler")}else if(""!==e[r]){var a=e[r].split(" ")[1].trim();for(var h in this.fi)if(h.replace(/\[\d.*/,"")===a){a=h;break}o.h.pn(this.fi,a),null!=e[r].match(/float4/gm)?this.fi[a].Kt="float4":null!=e[r].match(/float/gm)?this.fi[a].Kt="float":null!=e[r].match(/mat4/gm)&&(this.fi[a].Kt="mat4")}this.un=void 0!==i&&null!==i?i:"",this.un=this.un.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.un=o.h.bn(this.un,this.fi),this.cn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.cn=this.cn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.cn=o.h.bn(this.cn,this.fi);var u=n();!0===this.in&&(console.log("%c KERNEL: "+this.name,"font-size: 20px; color: blue"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}]),t}();e.Vt=l,i.i.Vt=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ki:5}],5:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.h=function(){function t(){e(this,t)}return r(t,[{l:"loadQuad",n:function(t,i,n){var e=void 0===i||null===i?.5:i,r=void 0===n||null===n?.5:n;this.U=[-e,-r,0,e,-r,0,e,r,0,-e,r,0],this.En=[0,0,0,1,0,0,1,1,0,0,1,0],this.X=[0,1,2,0,2,3];var s={};return s.U=this.U,s.En=this.En,s.X=this.X,s}},{l:"createShader",n:function(t,i,n,e,r){var s=!1,o=!1,l=function(i,n){console.log(i);for(var e=[],r=i.split("\n"),s=0,o=r.length;s<o;s++)if(null!=r[s].match(/^ERROR/gim)){var l=r[s].split(":"),a=parseInt(l[2]);e.push([a,r[s]])}var h=t.wn(n).split("\n");h.unshift("");for(var u=0,f=h.length;u<f;u++){for(var c=!1,v="",d=0,m=e.length;d<m;d++)if(u===e[d][0]){c=!0,v=e[d][1];break}!1===c?console.log("%c"+u+" %c"+h[u],"color:black","color:blue"):console.log("%c►►%c"+u+" %c"+h[u]+"\n%c"+v,"color:red","color:black","color:blue","color:red")}}.bind(this),a=t.K(t.Ln);if(t.kn(a,n),t.An(a),t.Rn(a,t.Tn))t.Sn(r,a),s=!0;else{var h=t.xn(a);console.log("%c"+i+" ERROR (vertex program)","color:red"),void 0!==h&&null!==h&&l(h,a)}var u=t.K(t.x);if(t.kn(u,e),t.An(u),t.Rn(u,t.Tn))t.Sn(r,u),o=!0;else{var f=t.xn(u);console.log("%c"+i+" ERROR (fragment program)","color:red"),void 0!==f&&null!==f&&l(f,u)}if(!0===s&&!0===o){if(t.Mn(r),t.Fn(r,t.On))return!0;console.log("Error shader program "+i+":\n ");var c=t.Cn(r);return void 0!==c&&null!==c&&console.log(c),!1}return!1}},{l:"pack",n:function(t){var i=[1/255,1/255,1/255,0],n=t,e=this.Gn(255*n),r=this.Gn(255*e),s=[n,e,r,this.Gn(255*r)],o=[s[1]*i[0],s[2]*i[1],s[3]*i[2],s[3]*i[3]];return[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}},{l:"unpack",n:function(t){var i=[1,1/255,1/65025,1/16581375];return this.Wn(t,i)}}],[{l:"getWebGLContextFromCanvas",n:function(t,i){var n=null;if(null==n)try{n=void 0===i||null===i?t.Pn("webgl"):t.Pn("webgl",i),console.log(null==n?"no webgl":"using webgl")}catch(t){n=null}if(null==n)try{n=void 0===i||null===i?t.Pn("experimental-webgl"):t.Pn("experimental-webgl",i),console.log(null==n?"no experimental-webgl":"using experimental-webgl")}catch(t){n=null}return null==n&&(n=!1),n}},{l:"getUint8ArrayFromHTMLImageElement",n:function(t){var i=document.c("canvas");i.v=t.v,i.d=t.d;var n=i.Pn("2d");return n.Bn(t,0,0),n.Nn(0,0,t.v,t.d).In}},{l:"dot4",n:function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}},{l:"fract",n:function(t){return t>0?t-Math.floor(t):t-Math.ceil(t)}},{l:"packGLSLFunctionString",n:function(){return"vec4 pack (float depth) {\nconst vec4 bias = vec4(1.0 / 255.0,\n1.0 / 255.0,\n1.0 / 255.0,\n0.0);\nfloat r = depth;\nfloat g = fract(r * 255.0);\nfloat b = fract(g * 255.0);\nfloat a = fract(b * 255.0);\nvec4 colour = vec4(r, g, b, a);\nreturn colour - (colour.yzww * bias);\n}\n"}},{l:"unpackGLSLFunctionString",n:function(){return"float unpack (vec4 colour) {\nconst vec4 bitShifts = vec4(1.0,\n1.0 / 255.0,\n1.0 / (255.0 * 255.0),\n1.0 / (255.0 * 255.0 * 255.0));\nreturn dot(colour, bitShifts);\n}\n"}},{l:"getOutputBuffers",n:function(t,i){var n=null;if(void 0!==t.nn&&null!==t.nn)if(n=[],null!=t.nn[0])for(var e=0;e<t.nn.length;e++)n[e]=i[t.nn[e]];else n=null;return n}},{l:"parseSource",n:function(t,i){for(var n in i){var e=new RegExp(n+"\\[(?!\\d).*?\\]","gm"),r=t.match(e);if(null!=r)for(var s=0,o=r.length;s<o;s++){var l=new RegExp("```(s|\t)*gl.*"+r[s]+".*```[^```(s|\t)*gl]","gm");if(null==t.match(l)){var a=r[s].split("[")[0],h=r[s].split("[")[1].split("]")[0];t={dn:t.replace(a+"["+h+"]","texture2D("+a+","+h+")"),mn:t.replace(a+"["+h+"]","texture2D("+a+","+h+").x"),Un:t.replace(a+"["+h+"]",a),Dn:t.replace(a+"["+h+"]",a)}[i[n].Kt]}}}return t=t.replace(/```(\s|\t)*gl/gi,"").replace(/```/gi,"").replace(/;/gi,";\n").replace(/}/gi,"}\n").replace(/{/gi,"{\n")}},{l:"lines_vertex_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",Un:"attribute vec4 "+n+";",Dn:"attribute float "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_fragment_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_drawBuffersInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="float out"+n+"_float = -999.99989;\nvec4 out"+n+"_float4;\n";return i}},{l:"lines_drawBuffersWriteInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="layout(location = "+n+") out vec4 outCol"+n+";\n";return i}},{l:"lines_drawBuffersWrite",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="if(out"+n+"_float != -999.99989) gl_FragData["+n+"] = vec4(out"+n+"_float,0.0,0.0,1.0);\n else gl_FragData["+n+"] = out"+n+"_float4;\n";return i}},{l:"checkArgNameInitialization",n:function(t,i){!1===t.hasOwnProperty(i)&&(t[i]={Kt:null,ei:null,$t:null})}},{l:"get_global_id3_GLSLFunctionString",n:function(){return"vec2 get_global_id(float id, float bufferWidth, float geometryLength) {\nfloat texelSize = 1.0/bufferWidth;float num = (id*geometryLength)/bufferWidth;float column = fract(num)+(texelSize/2.0);float row = (floor(num)/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}},{l:"get_global_id2_GLSLFunctionString",n:function(){return"vec2 get_global_id(vec2 id, float bufferWidth) {\nfloat texelSize = 1.0/bufferWidth;float column = (id.x/bufferWidth)+(texelSize/2.0);float row = (id.y/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}}]),t}();t.h=s,i.i.h=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.zt=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLUtils.class"),l=n.zt=function(){function t(i,n,e,s,o){r(this,t),this.u=i;var l=this.u.S(this.u.x,this.u.M);this.ji=0!==l.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var a=this.u.L("WEBGL_draw_buffers");this.A=null,null!=a&&(this.A=this.u.R(a.T)),this.name="",this.in=!1,this.di={},this.mi={},this.Vn=!1,this.zn=!1,this.Xn=null,this.qn=null,this.jn=null,this.Hn=null,this.nn=null,this.en=null,this.Rt=null,this.ai=null,this.Kn=4,void 0!==n&&null!==n&&this.$n(n,e),void 0!==s&&null!==s&&this.Qn(s,o)}return s(t,[{l:"compileVertexFragmentSource",n:function(){var t=this.ji+"uniform float uOffset;\nuniform float uBufferWidth;"+o.h.Yn(this.di)+o.h.Jn()+o.h.an()+o.h.hn()+this.Xn+"void main(void) {\n"+this.qn+"}\n",i="#extension GL_EXT_draw_buffers : require\n"+this.ji+o.h.ln(this.mi)+o.h.an()+o.h.hn()+this.jn+"void main(void) {\n"+o.h.fn(8)+this.Hn+o.h.vn(8)+"}\n";this.vi=this.u.H();(new o.h).K(this.u,"WEBCLGL VERTEX FRAGMENT PROGRAM",t,i,this.vi);this.Zn=this.u.J(this.vi,"uOffset"),this.oi=this.u.J(this.vi,"uBufferWidth");for(var n in this.di){var e={dn:"SAMPLER",mn:"SAMPLER",Un:"ATTRIBUTE",Dn:"ATTRIBUTE",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.di[n].Kt];o.h.pn(this.di,n);var r="ATTRIBUTE"===e?this.u.Q(this.vi,n):this.u.J(this.vi,n.replace(/\[\d.*/,""));this.di[n].$t=[r],this.di[n].ei=e}for(var s in this.mi){var l={dn:"SAMPLER",mn:"SAMPLER",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.mi[s].Kt];o.h.pn(this.mi,s),this.mi[s].$t=[this.u.J(this.vi,s.replace(/\[\d.*/,""))],this.mi[s].ei=l}return"VERTEX PROGRAM\n"+t+"\n FRAGMENT PROGRAM\n"+i}},{l:"setVertexSource",n:function(t,i){for(var n=t.split(")")[0].split("(")[1].split(","),e=0,r=n.length;e<r;e++)if(null!==n[e].match(/\*attr/gm)){var s=n[e].split("*attr")[1].trim();o.h.pn(this.di,s),null!=n[e].match(/float4/gm)?this.di[s].Kt="float4_fromAttr":null!=n[e].match(/float/gm)&&(this.di[s].Kt="float_fromAttr")}else if(null!==n[e].match(/\*/gm)){var l=n[e].split("*")[1].trim();o.h.pn(this.di,l),null!=n[e].match(/float4/gm)?this.di[l].Kt="float4_fromSampler":null!=n[e].match(/float/gm)&&(this.di[l].Kt="float_fromSampler")}else if(""!==n[e]){var a=n[e].split(" ")[1].trim();for(var h in this.di)if(h.replace(/\[\d.*/,"")===a){a=h;break}o.h.pn(this.di,a),null!=n[e].match(/float4/gm)?this.di[a].Kt="float4":null!=n[e].match(/float/gm)?this.di[a].Kt="float":null!=n[e].match(/mat4/gm)&&(this.di[a].Kt="mat4")}if(this.Xn=void 0!==i&&null!==i?i:"",this.Xn=this.Xn.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.Xn=o.h.bn(this.Xn,this.di),this.qn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.qn=this.qn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.qn=o.h.bn(this.qn,this.di),this.Vn=!0,!0===this.zn){var u=this.te();!0===this.in&&(console.log("%c VFP: "+this.name,"font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}},{l:"setFragmentSource",n:function(t,i){for(var n=t.split(")")[0].split("(")[1].split(","),e=0,r=n.length;e<r;e++)if(null!==n[e].match(/\*/gm)){var s=n[e].split("*")[1].trim();o.h.pn(this.mi,s),null!=n[e].match(/float4/gm)?this.mi[s].Kt="float4_fromSampler":null!=n[e].match(/float/gm)&&(this.mi[s].Kt="float_fromSampler")}else if(""!==n[e]){var l=n[e].split(" ")[1].trim();for(var a in this.mi)if(a.replace(/\[\d.*/,"")===l){l=a;break}o.h.pn(this.mi,l),null!=n[e].match(/float4/gm)?this.mi[l].Kt="float4":null!=n[e].match(/float/gm)?this.mi[l].Kt="float":null!=n[e].match(/mat4/gm)&&(this.mi[l].Kt="mat4")}if(this.jn=void 0!==i&&null!==i?i:"",this.jn=this.jn.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.jn=o.h.bn(this.jn,this.mi),this.Hn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.Hn=this.Hn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.Hn=o.h.bn(this.Hn,this.mi),this.zn=!0,!0===this.Vn){var h=this.te();!0===this.in&&(console.log("%c VFP: ","font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+h,"color: darkgray"))}}}]),t}();e.zt=l,i.i.zt=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ki:5}]},{},[3]),function(){function t(i,n,e){function r(o,l){if(!n[o]){if(!i[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.t="MODULE_NOT_FOUND",h}var u=n[o]={i:{}};i[o][0].call(u.i,function(t){var n=i[o][1][t];return r(n||t)},u,u.i,t,i,n,e)}return n[o].i}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}return t}()({1:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.Vt=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLUtils.class"),l=n.Vt=function(){function t(i,n,e){r(this,t),this.u=i;var s=this.u.S(this.u.x,this.u.M);this.ji=0!==s.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var o=this.u.L("WEBGL_draw_buffers");this.A=null,null!=o&&(this.A=this.u.R(o.T)),this.name="",this.Hi=!0,this.Ki=null,this.$i=null,this.Qi=null,this.Yi=null,this.Ji=null,this.Zi=null,this.tn=null,this.in=!1,this.fi={},this.nn=null,this.en=null,this.Rt=null,this.ai=null,this.rn=0,this.sn=0,void 0!==n&&null!==n&&this.on(n,e)}return s(t,[{l:"setKernelSource",n:function(t,i){for(var n=function(){var t=this.ji+"attribute vec3 aVertexPosition;\nvarying vec2 global_id;\nvoid main(void) {\ngl_Position = vec4(aVertexPosition, 1.0);\nglobal_id = aVertexPosition.xy*0.5+0.5;\n}\n",i="#extension GL_EXT_draw_buffers : require\n"+this.ji+o.h.ln(this.fi)+"varying vec2 global_id;\nuniform float uBufferWidth;vec2 get_global_id() {\nreturn global_id;\n}\n"+o.h.an()+o.h.hn()+this.un+"void main(void) {\n"+o.h.fn(8)+this.cn+o.h.vn(8)+"}\n";this.hi=this.u.H();(new o.h).K(this.u,"WEBCLGL",t,i,this.hi);this.$=this.u.Q(this.hi,"aVertexPosition"),this.oi=this.u.J(this.hi,"uBufferWidth");for(var n in this.fi){var e={dn:"SAMPLER",mn:"SAMPLER",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.fi[n].Kt];o.h.pn(this.fi,n),this.fi[n].$t=[this.u.J(this.hi,n.replace(/\[\d.*/,""))],this.fi[n].ei=e}return"VERTEX PROGRAM\n"+t+"\n FRAGMENT PROGRAM\n"+i}.bind(this),e=t.split(")")[0].split("(")[1].split(","),r=0,s=e.length;r<s;r++)if(null!==e[r].match(/\*/gm)){var l=e[r].split("*")[1].trim();o.h.pn(this.fi,l),null!=e[r].match(/float4/gm)?this.fi[l].Kt="float4_fromSampler":null!=e[r].match(/float/gm)&&(this.fi[l].Kt="float_fromSampler")}else if(""!==e[r]){var a=e[r].split(" ")[1].trim();for(var h in this.fi)if(h.replace(/\[\d.*/,"")===a){a=h;break}o.h.pn(this.fi,a),null!=e[r].match(/float4/gm)?this.fi[a].Kt="float4":null!=e[r].match(/float/gm)?this.fi[a].Kt="float":null!=e[r].match(/mat4/gm)&&(this.fi[a].Kt="mat4")}this.un=void 0!==i&&null!==i?i:"",this.un=this.un.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.un=o.h.bn(this.un,this.fi),this.cn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.cn=this.cn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.cn=o.h.bn(this.cn,this.fi);var u=n();!0===this.in&&(console.log("%c KERNEL: "+this.name,"font-size: 20px; color: blue"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}]),t}();e.Vt=l,i.i.Vt=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ki:2}],2:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.h=function(){function t(){e(this,t)}return r(t,[{l:"loadQuad",n:function(t,i,n){var e=void 0===i||null===i?.5:i,r=void 0===n||null===n?.5:n;this.U=[-e,-r,0,e,-r,0,e,r,0,-e,r,0],this.En=[0,0,0,1,0,0,1,1,0,0,1,0],this.X=[0,1,2,0,2,3];var s={};return s.U=this.U,s.En=this.En,s.X=this.X,s}},{l:"createShader",n:function(t,i,n,e,r){var s=!1,o=!1,l=function(i,n){console.log(i);for(var e=[],r=i.split("\n"),s=0,o=r.length;s<o;s++)if(null!=r[s].match(/^ERROR/gim)){var l=r[s].split(":"),a=parseInt(l[2]);e.push([a,r[s]])}var h=t.wn(n).split("\n");h.unshift("");for(var u=0,f=h.length;u<f;u++){for(var c=!1,v="",d=0,m=e.length;d<m;d++)if(u===e[d][0]){c=!0,v=e[d][1];break}!1===c?console.log("%c"+u+" %c"+h[u],"color:black","color:blue"):console.log("%c►►%c"+u+" %c"+h[u]+"\n%c"+v,"color:red","color:black","color:blue","color:red")}}.bind(this),a=t.K(t.Ln);if(t.kn(a,n),t.An(a),t.Rn(a,t.Tn))t.Sn(r,a),s=!0;else{var h=t.xn(a);console.log("%c"+i+" ERROR (vertex program)","color:red"),void 0!==h&&null!==h&&l(h,a)}var u=t.K(t.x);if(t.kn(u,e),t.An(u),t.Rn(u,t.Tn))t.Sn(r,u),o=!0;else{var f=t.xn(u);console.log("%c"+i+" ERROR (fragment program)","color:red"),void 0!==f&&null!==f&&l(f,u)}if(!0===s&&!0===o){if(t.Mn(r),t.Fn(r,t.On))return!0;console.log("Error shader program "+i+":\n ");var c=t.Cn(r);return void 0!==c&&null!==c&&console.log(c),!1}return!1}},{l:"pack",n:function(t){var i=[1/255,1/255,1/255,0],n=t,e=this.Gn(255*n),r=this.Gn(255*e),s=[n,e,r,this.Gn(255*r)],o=[s[1]*i[0],s[2]*i[1],s[3]*i[2],s[3]*i[3]];return[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}},{l:"unpack",n:function(t){var i=[1,1/255,1/65025,1/16581375];return this.Wn(t,i)}}],[{l:"getWebGLContextFromCanvas",n:function(t,i){var n=null;if(null==n)try{n=void 0===i||null===i?t.Pn("webgl"):t.Pn("webgl",i),console.log(null==n?"no webgl":"using webgl")}catch(t){n=null}if(null==n)try{n=void 0===i||null===i?t.Pn("experimental-webgl"):t.Pn("experimental-webgl",i),console.log(null==n?"no experimental-webgl":"using experimental-webgl")}catch(t){n=null}return null==n&&(n=!1),n}},{l:"getUint8ArrayFromHTMLImageElement",n:function(t){var i=document.c("canvas");i.v=t.v,i.d=t.d;var n=i.Pn("2d");return n.Bn(t,0,0),n.Nn(0,0,t.v,t.d).In}},{l:"dot4",n:function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}},{l:"fract",n:function(t){return t>0?t-Math.floor(t):t-Math.ceil(t)}},{l:"packGLSLFunctionString",n:function(){return"vec4 pack (float depth) {\nconst vec4 bias = vec4(1.0 / 255.0,\n1.0 / 255.0,\n1.0 / 255.0,\n0.0);\nfloat r = depth;\nfloat g = fract(r * 255.0);\nfloat b = fract(g * 255.0);\nfloat a = fract(b * 255.0);\nvec4 colour = vec4(r, g, b, a);\nreturn colour - (colour.yzww * bias);\n}\n"}},{l:"unpackGLSLFunctionString",n:function(){return"float unpack (vec4 colour) {\nconst vec4 bitShifts = vec4(1.0,\n1.0 / 255.0,\n1.0 / (255.0 * 255.0),\n1.0 / (255.0 * 255.0 * 255.0));\nreturn dot(colour, bitShifts);\n}\n"}},{l:"getOutputBuffers",n:function(t,i){var n=null;if(void 0!==t.nn&&null!==t.nn)if(n=[],null!=t.nn[0])for(var e=0;e<t.nn.length;e++)n[e]=i[t.nn[e]];else n=null;return n}},{l:"parseSource",n:function(t,i){for(var n in i){var e=new RegExp(n+"\\[(?!\\d).*?\\]","gm"),r=t.match(e);if(null!=r)for(var s=0,o=r.length;s<o;s++){var l=new RegExp("```(s|\t)*gl.*"+r[s]+".*```[^```(s|\t)*gl]","gm");if(null==t.match(l)){var a=r[s].split("[")[0],h=r[s].split("[")[1].split("]")[0];t={dn:t.replace(a+"["+h+"]","texture2D("+a+","+h+")"),mn:t.replace(a+"["+h+"]","texture2D("+a+","+h+").x"),Un:t.replace(a+"["+h+"]",a),Dn:t.replace(a+"["+h+"]",a)}[i[n].Kt]}}}return t=t.replace(/```(\s|\t)*gl/gi,"").replace(/```/gi,"").replace(/;/gi,";\n").replace(/}/gi,"}\n").replace(/{/gi,"{\n")}},{l:"lines_vertex_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",Un:"attribute vec4 "+n+";",Dn:"attribute float "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_fragment_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_drawBuffersInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="float out"+n+"_float = -999.99989;\nvec4 out"+n+"_float4;\n";return i}},{l:"lines_drawBuffersWriteInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="layout(location = "+n+") out vec4 outCol"+n+";\n";return i}},{l:"lines_drawBuffersWrite",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="if(out"+n+"_float != -999.99989) gl_FragData["+n+"] = vec4(out"+n+"_float,0.0,0.0,1.0);\n else gl_FragData["+n+"] = out"+n+"_float4;\n";return i}},{l:"checkArgNameInitialization",n:function(t,i){!1===t.hasOwnProperty(i)&&(t[i]={Kt:null,ei:null,$t:null})}},{l:"get_global_id3_GLSLFunctionString",n:function(){return"vec2 get_global_id(float id, float bufferWidth, float geometryLength) {\nfloat texelSize = 1.0/bufferWidth;float num = (id*geometryLength)/bufferWidth;float column = fract(num)+(texelSize/2.0);float row = (floor(num)/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}},{l:"get_global_id2_GLSLFunctionString",n:function(){return"vec2 get_global_id(vec2 id, float bufferWidth) {\nfloat texelSize = 1.0/bufferWidth;float column = (id.x/bufferWidth)+(texelSize/2.0);float row = (id.y/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}}]),t}();t.h=s,i.i.h=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(){function t(i,n,e){function r(o,l){if(!n[o]){if(!i[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.t="MODULE_NOT_FOUND",h}var u=n[o]={i:{}};i[o][0].call(u.i,function(t){var n=i[o][1][t];return r(n||t)},u,u.i,t,i,n,e)}return n[o].i}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}return t}()({1:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.h=function(){function t(){e(this,t)}return r(t,[{l:"loadQuad",n:function(t,i,n){var e=void 0===i||null===i?.5:i,r=void 0===n||null===n?.5:n;this.U=[-e,-r,0,e,-r,0,e,r,0,-e,r,0],this.En=[0,0,0,1,0,0,1,1,0,0,1,0],this.X=[0,1,2,0,2,3];var s={};return s.U=this.U,s.En=this.En,s.X=this.X,s}},{l:"createShader",n:function(t,i,n,e,r){var s=!1,o=!1,l=function(i,n){console.log(i);for(var e=[],r=i.split("\n"),s=0,o=r.length;s<o;s++)if(null!=r[s].match(/^ERROR/gim)){var l=r[s].split(":"),a=parseInt(l[2]);e.push([a,r[s]])}var h=t.wn(n).split("\n");h.unshift("");for(var u=0,f=h.length;u<f;u++){for(var c=!1,v="",d=0,m=e.length;d<m;d++)if(u===e[d][0]){c=!0,v=e[d][1];break}!1===c?console.log("%c"+u+" %c"+h[u],"color:black","color:blue"):console.log("%c►►%c"+u+" %c"+h[u]+"\n%c"+v,"color:red","color:black","color:blue","color:red")}}.bind(this),a=t.K(t.Ln);if(t.kn(a,n),t.An(a),t.Rn(a,t.Tn))t.Sn(r,a),s=!0;else{var h=t.xn(a);console.log("%c"+i+" ERROR (vertex program)","color:red"),void 0!==h&&null!==h&&l(h,a)}var u=t.K(t.x);if(t.kn(u,e),t.An(u),t.Rn(u,t.Tn))t.Sn(r,u),o=!0;else{var f=t.xn(u);console.log("%c"+i+" ERROR (fragment program)","color:red"),void 0!==f&&null!==f&&l(f,u)}if(!0===s&&!0===o){if(t.Mn(r),t.Fn(r,t.On))return!0;console.log("Error shader program "+i+":\n ");var c=t.Cn(r);return void 0!==c&&null!==c&&console.log(c),!1}return!1}},{l:"pack",n:function(t){var i=[1/255,1/255,1/255,0],n=t,e=this.Gn(255*n),r=this.Gn(255*e),s=[n,e,r,this.Gn(255*r)],o=[s[1]*i[0],s[2]*i[1],s[3]*i[2],s[3]*i[3]];return[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}},{l:"unpack",n:function(t){var i=[1,1/255,1/65025,1/16581375];return this.Wn(t,i)}}],[{l:"getWebGLContextFromCanvas",n:function(t,i){var n=null;if(null==n)try{n=void 0===i||null===i?t.Pn("webgl"):t.Pn("webgl",i),console.log(null==n?"no webgl":"using webgl")}catch(t){n=null}if(null==n)try{n=void 0===i||null===i?t.Pn("experimental-webgl"):t.Pn("experimental-webgl",i),console.log(null==n?"no experimental-webgl":"using experimental-webgl")}catch(t){n=null}return null==n&&(n=!1),n}},{l:"getUint8ArrayFromHTMLImageElement",n:function(t){var i=document.c("canvas");i.v=t.v,i.d=t.d;var n=i.Pn("2d");return n.Bn(t,0,0),n.Nn(0,0,t.v,t.d).In}},{l:"dot4",n:function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}},{l:"fract",n:function(t){return t>0?t-Math.floor(t):t-Math.ceil(t)}},{l:"packGLSLFunctionString",n:function(){return"vec4 pack (float depth) {\nconst vec4 bias = vec4(1.0 / 255.0,\n1.0 / 255.0,\n1.0 / 255.0,\n0.0);\nfloat r = depth;\nfloat g = fract(r * 255.0);\nfloat b = fract(g * 255.0);\nfloat a = fract(b * 255.0);\nvec4 colour = vec4(r, g, b, a);\nreturn colour - (colour.yzww * bias);\n}\n"}},{l:"unpackGLSLFunctionString",n:function(){return"float unpack (vec4 colour) {\nconst vec4 bitShifts = vec4(1.0,\n1.0 / 255.0,\n1.0 / (255.0 * 255.0),\n1.0 / (255.0 * 255.0 * 255.0));\nreturn dot(colour, bitShifts);\n}\n"}},{l:"getOutputBuffers",n:function(t,i){var n=null;if(void 0!==t.nn&&null!==t.nn)if(n=[],null!=t.nn[0])for(var e=0;e<t.nn.length;e++)n[e]=i[t.nn[e]];else n=null;return n}},{l:"parseSource",n:function(t,i){for(var n in i){var e=new RegExp(n+"\\[(?!\\d).*?\\]","gm"),r=t.match(e);if(null!=r)for(var s=0,o=r.length;s<o;s++){var l=new RegExp("```(s|\t)*gl.*"+r[s]+".*```[^```(s|\t)*gl]","gm");if(null==t.match(l)){var a=r[s].split("[")[0],h=r[s].split("[")[1].split("]")[0];t={dn:t.replace(a+"["+h+"]","texture2D("+a+","+h+")"),mn:t.replace(a+"["+h+"]","texture2D("+a+","+h+").x"),Un:t.replace(a+"["+h+"]",a),Dn:t.replace(a+"["+h+"]",a)}[i[n].Kt]}}}return t=t.replace(/```(\s|\t)*gl/gi,"").replace(/```/gi,"").replace(/;/gi,";\n").replace(/}/gi,"}\n").replace(/{/gi,"{\n")}},{l:"lines_vertex_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",Un:"attribute vec4 "+n+";",Dn:"attribute float "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_fragment_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_drawBuffersInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="float out"+n+"_float = -999.99989;\nvec4 out"+n+"_float4;\n";return i}},{l:"lines_drawBuffersWriteInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="layout(location = "+n+") out vec4 outCol"+n+";\n";return i}},{l:"lines_drawBuffersWrite",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="if(out"+n+"_float != -999.99989) gl_FragData["+n+"] = vec4(out"+n+"_float,0.0,0.0,1.0);\n else gl_FragData["+n+"] = out"+n+"_float4;\n";return i}},{l:"checkArgNameInitialization",n:function(t,i){!1===t.hasOwnProperty(i)&&(t[i]={Kt:null,ei:null,$t:null})}},{l:"get_global_id3_GLSLFunctionString",n:function(){return"vec2 get_global_id(float id, float bufferWidth, float geometryLength) {\nfloat texelSize = 1.0/bufferWidth;float num = (id*geometryLength)/bufferWidth;float column = fract(num)+(texelSize/2.0);float row = (floor(num)/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}},{l:"get_global_id2_GLSLFunctionString",n:function(){return"vec2 get_global_id(vec2 id, float bufferWidth) {\nfloat texelSize = 1.0/bufferWidth;float column = (id.x/bufferWidth)+(texelSize/2.0);float row = (id.y/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}}]),t}();t.h=s,i.i.h=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(){function t(i,n,e){function r(o,l){if(!n[o]){if(!i[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.t="MODULE_NOT_FOUND",h}var u=n[o]={i:{}};i[o][0].call(u.i,function(t){var n=i[o][1][t];return r(n||t)},u,u.i,t,i,n,e)}return n[o].i}for(var s="function"==typeof require&&require,o=0;o<e.length;o++)r(e[o]);return r}return t}()({1:[function(t,i,n){(function(t){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0});var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),s=n.h=function(){function t(){e(this,t)}return r(t,[{l:"loadQuad",n:function(t,i,n){var e=void 0===i||null===i?.5:i,r=void 0===n||null===n?.5:n;this.U=[-e,-r,0,e,-r,0,e,r,0,-e,r,0],this.En=[0,0,0,1,0,0,1,1,0,0,1,0],this.X=[0,1,2,0,2,3];var s={};return s.U=this.U,s.En=this.En,s.X=this.X,s}},{l:"createShader",n:function(t,i,n,e,r){var s=!1,o=!1,l=function(i,n){console.log(i);for(var e=[],r=i.split("\n"),s=0,o=r.length;s<o;s++)if(null!=r[s].match(/^ERROR/gim)){var l=r[s].split(":"),a=parseInt(l[2]);e.push([a,r[s]])}var h=t.wn(n).split("\n");h.unshift("");for(var u=0,f=h.length;u<f;u++){for(var c=!1,v="",d=0,m=e.length;d<m;d++)if(u===e[d][0]){c=!0,v=e[d][1];break}!1===c?console.log("%c"+u+" %c"+h[u],"color:black","color:blue"):console.log("%c►►%c"+u+" %c"+h[u]+"\n%c"+v,"color:red","color:black","color:blue","color:red")}}.bind(this),a=t.K(t.Ln);if(t.kn(a,n),t.An(a),t.Rn(a,t.Tn))t.Sn(r,a),s=!0;else{var h=t.xn(a);console.log("%c"+i+" ERROR (vertex program)","color:red"),void 0!==h&&null!==h&&l(h,a)}var u=t.K(t.x);if(t.kn(u,e),t.An(u),t.Rn(u,t.Tn))t.Sn(r,u),o=!0;else{var f=t.xn(u);console.log("%c"+i+" ERROR (fragment program)","color:red"),void 0!==f&&null!==f&&l(f,u)}if(!0===s&&!0===o){if(t.Mn(r),t.Fn(r,t.On))return!0;console.log("Error shader program "+i+":\n ");var c=t.Cn(r);return void 0!==c&&null!==c&&console.log(c),!1}return!1}},{l:"pack",n:function(t){var i=[1/255,1/255,1/255,0],n=t,e=this.Gn(255*n),r=this.Gn(255*e),s=[n,e,r,this.Gn(255*r)],o=[s[1]*i[0],s[2]*i[1],s[3]*i[2],s[3]*i[3]];return[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}},{l:"unpack",n:function(t){var i=[1,1/255,1/65025,1/16581375];return this.Wn(t,i)}}],[{l:"getWebGLContextFromCanvas",n:function(t,i){var n=null;if(null==n)try{n=void 0===i||null===i?t.Pn("webgl"):t.Pn("webgl",i),console.log(null==n?"no webgl":"using webgl")}catch(t){n=null}if(null==n)try{n=void 0===i||null===i?t.Pn("experimental-webgl"):t.Pn("experimental-webgl",i),console.log(null==n?"no experimental-webgl":"using experimental-webgl")}catch(t){n=null}return null==n&&(n=!1),n}},{l:"getUint8ArrayFromHTMLImageElement",n:function(t){var i=document.c("canvas");i.v=t.v,i.d=t.d;var n=i.Pn("2d");return n.Bn(t,0,0),n.Nn(0,0,t.v,t.d).In}},{l:"dot4",n:function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}},{l:"fract",n:function(t){return t>0?t-Math.floor(t):t-Math.ceil(t)}},{l:"packGLSLFunctionString",n:function(){return"vec4 pack (float depth) {\nconst vec4 bias = vec4(1.0 / 255.0,\n1.0 / 255.0,\n1.0 / 255.0,\n0.0);\nfloat r = depth;\nfloat g = fract(r * 255.0);\nfloat b = fract(g * 255.0);\nfloat a = fract(b * 255.0);\nvec4 colour = vec4(r, g, b, a);\nreturn colour - (colour.yzww * bias);\n}\n"}},{l:"unpackGLSLFunctionString",n:function(){return"float unpack (vec4 colour) {\nconst vec4 bitShifts = vec4(1.0,\n1.0 / 255.0,\n1.0 / (255.0 * 255.0),\n1.0 / (255.0 * 255.0 * 255.0));\nreturn dot(colour, bitShifts);\n}\n"}},{l:"getOutputBuffers",n:function(t,i){var n=null;if(void 0!==t.nn&&null!==t.nn)if(n=[],null!=t.nn[0])for(var e=0;e<t.nn.length;e++)n[e]=i[t.nn[e]];else n=null;return n}},{l:"parseSource",n:function(t,i){for(var n in i){var e=new RegExp(n+"\\[(?!\\d).*?\\]","gm"),r=t.match(e);if(null!=r)for(var s=0,o=r.length;s<o;s++){var l=new RegExp("```(s|\t)*gl.*"+r[s]+".*```[^```(s|\t)*gl]","gm");if(null==t.match(l)){var a=r[s].split("[")[0],h=r[s].split("[")[1].split("]")[0];t={dn:t.replace(a+"["+h+"]","texture2D("+a+","+h+")"),mn:t.replace(a+"["+h+"]","texture2D("+a+","+h+").x"),Un:t.replace(a+"["+h+"]",a),Dn:t.replace(a+"["+h+"]",a)}[i[n].Kt]}}}return t=t.replace(/```(\s|\t)*gl/gi,"").replace(/```/gi,"").replace(/;/gi,";\n").replace(/}/gi,"}\n").replace(/{/gi,"{\n")}},{l:"lines_vertex_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",Un:"attribute vec4 "+n+";",Dn:"attribute float "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_fragment_attrs",n:function(t){var i="";for(var n in t)i+={dn:"uniform sampler2D "+n+";",mn:"uniform sampler2D "+n+";",gn:"uniform float "+n+";",yn:"uniform vec4 "+n+";",_n:"uniform mat4 "+n+";"}[t[n].Kt]+"\n";return i}},{l:"lines_drawBuffersInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="float out"+n+"_float = -999.99989;\nvec4 out"+n+"_float4;\n";return i}},{l:"lines_drawBuffersWriteInit",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="layout(location = "+n+") out vec4 outCol"+n+";\n";return i}},{l:"lines_drawBuffersWrite",n:function(t){for(var i="",n=0,e=t;n<e;n++)i+="if(out"+n+"_float != -999.99989) gl_FragData["+n+"] = vec4(out"+n+"_float,0.0,0.0,1.0);\n else gl_FragData["+n+"] = out"+n+"_float4;\n";return i}},{l:"checkArgNameInitialization",n:function(t,i){!1===t.hasOwnProperty(i)&&(t[i]={Kt:null,ei:null,$t:null})}},{l:"get_global_id3_GLSLFunctionString",n:function(){return"vec2 get_global_id(float id, float bufferWidth, float geometryLength) {\nfloat texelSize = 1.0/bufferWidth;float num = (id*geometryLength)/bufferWidth;float column = fract(num)+(texelSize/2.0);float row = (floor(num)/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}},{l:"get_global_id2_GLSLFunctionString",n:function(){return"vec2 get_global_id(vec2 id, float bufferWidth) {\nfloat texelSize = 1.0/bufferWidth;float column = (id.x/bufferWidth)+(texelSize/2.0);float row = (id.y/bufferWidth)+(texelSize/2.0);return vec2(column, row);}\n"}}]),t}();t.h=s,i.i.h=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,i,n){(function(e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{n:!0}),n.zt=void 0;var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.r=e.r||!1,e.s=!0,"value"in e&&(e.o=!0),Object.defineProperty(t,e.l,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=t("./WebCLGLUtils.class"),l=n.zt=function(){function t(i,n,e,s,o){r(this,t),this.u=i;var l=this.u.S(this.u.x,this.u.M);this.ji=0!==l.F?"precision highp float;\n\nprecision highp int;\n\n":"precision lowp float;\n\nprecision lowp int;\n\n";var a=this.u.L("WEBGL_draw_buffers");this.A=null,null!=a&&(this.A=this.u.R(a.T)),this.name="",this.in=!1,this.di={},this.mi={},this.Vn=!1,this.zn=!1,this.Xn=null,this.qn=null,this.jn=null,this.Hn=null,this.nn=null,this.en=null,this.Rt=null,this.ai=null,this.Kn=4,void 0!==n&&null!==n&&this.$n(n,e),void 0!==s&&null!==s&&this.Qn(s,o)}return s(t,[{l:"compileVertexFragmentSource",n:function(){var t=this.ji+"uniform float uOffset;\nuniform float uBufferWidth;"+o.h.Yn(this.di)+o.h.Jn()+o.h.an()+o.h.hn()+this.Xn+"void main(void) {\n"+this.qn+"}\n",i="#extension GL_EXT_draw_buffers : require\n"+this.ji+o.h.ln(this.mi)+o.h.an()+o.h.hn()+this.jn+"void main(void) {\n"+o.h.fn(8)+this.Hn+o.h.vn(8)+"}\n";this.vi=this.u.H();(new o.h).K(this.u,"WEBCLGL VERTEX FRAGMENT PROGRAM",t,i,this.vi);this.Zn=this.u.J(this.vi,"uOffset"),this.oi=this.u.J(this.vi,"uBufferWidth");for(var n in this.di){var e={dn:"SAMPLER",mn:"SAMPLER",Un:"ATTRIBUTE",Dn:"ATTRIBUTE",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.di[n].Kt];o.h.pn(this.di,n);var r="ATTRIBUTE"===e?this.u.Q(this.vi,n):this.u.J(this.vi,n.replace(/\[\d.*/,""));this.di[n].$t=[r],this.di[n].ei=e}for(var s in this.mi){var l={dn:"SAMPLER",mn:"SAMPLER",gn:"UNIFORM",yn:"UNIFORM",_n:"UNIFORM"}[this.mi[s].Kt];o.h.pn(this.mi,s),this.mi[s].$t=[this.u.J(this.vi,s.replace(/\[\d.*/,""))],this.mi[s].ei=l}return"VERTEX PROGRAM\n"+t+"\n FRAGMENT PROGRAM\n"+i}},{l:"setVertexSource",n:function(t,i){for(var n=t.split(")")[0].split("(")[1].split(","),e=0,r=n.length;e<r;e++)if(null!==n[e].match(/\*attr/gm)){var s=n[e].split("*attr")[1].trim();o.h.pn(this.di,s),null!=n[e].match(/float4/gm)?this.di[s].Kt="float4_fromAttr":null!=n[e].match(/float/gm)&&(this.di[s].Kt="float_fromAttr")}else if(null!==n[e].match(/\*/gm)){var l=n[e].split("*")[1].trim();o.h.pn(this.di,l),null!=n[e].match(/float4/gm)?this.di[l].Kt="float4_fromSampler":null!=n[e].match(/float/gm)&&(this.di[l].Kt="float_fromSampler")}else if(""!==n[e]){var a=n[e].split(" ")[1].trim();for(var h in this.di)if(h.replace(/\[\d.*/,"")===a){a=h;break}o.h.pn(this.di,a),null!=n[e].match(/float4/gm)?this.di[a].Kt="float4":null!=n[e].match(/float/gm)?this.di[a].Kt="float":null!=n[e].match(/mat4/gm)&&(this.di[a].Kt="mat4")}if(this.Xn=void 0!==i&&null!==i?i:"",this.Xn=this.Xn.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.Xn=o.h.bn(this.Xn,this.di),this.qn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.qn=this.qn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.qn=o.h.bn(this.qn,this.di),this.Vn=!0,!0===this.zn){var u=this.te();!0===this.in&&(console.log("%c VFP: "+this.name,"font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+u,"color: darkgray"))}}},{l:"setFragmentSource",n:function(t,i){for(var n=t.split(")")[0].split("(")[1].split(","),e=0,r=n.length;e<r;e++)if(null!==n[e].match(/\*/gm)){var s=n[e].split("*")[1].trim();o.h.pn(this.mi,s),null!=n[e].match(/float4/gm)?this.mi[s].Kt="float4_fromSampler":null!=n[e].match(/float/gm)&&(this.mi[s].Kt="float_fromSampler")}else if(""!==n[e]){var l=n[e].split(" ")[1].trim();for(var a in this.mi)if(a.replace(/\[\d.*/,"")===l){l=a;break}o.h.pn(this.mi,l),null!=n[e].match(/float4/gm)?this.mi[l].Kt="float4":null!=n[e].match(/float/gm)?this.mi[l].Kt="float":null!=n[e].match(/mat4/gm)&&(this.mi[l].Kt="mat4")}if(this.jn=void 0!==i&&null!==i?i:"",this.jn=this.jn.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.jn=o.h.bn(this.jn,this.mi),this.Hn=t.replace(/\r\n/gi,"").replace(/\r/gi,"").replace(/\n/gi,""),this.Hn=this.Hn.replace(/^\w* \w*\([\w\s\*,]*\) {/gi,"").replace(/}(\s|\t)*$/gi,""),this.Hn=o.h.bn(this.Hn,this.mi),this.zn=!0,!0===this.Vn){var h=this.te();!0===this.in&&(console.log("%c VFP: ","font-size: 20px; color: green"),console.log("%c WEBCLGL --------------------------------","color: gray"),console.log("%c "+i+t,"color: gray"),console.log("%c TRANSLATED WEBGL ------------------------------","color: darkgray"),console.log("%c "+h,"color: darkgray"))}}}]),t}();e.zt=l,i.i.zt=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{ki:1}]},{},[2]);